define(["@grafana/data","react","@grafana/ui","lodash","@grafana/runtime","rxjs"],((e,t,n,r,o,l)=>(()=>{var s={569:(e,t,n)=>{"use strict";var r=n(650),o=n(388),l=n(305),s=n(980);function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=a(r);const u=["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","cn-north-1","cn-northwest-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-gov-east-1","us-gov-west-1","us-iso-east-1","us-isob-east-1","us-west-1","us-west-2"];var f=(e=>(e.Keys="keys",e.Credentials="credentials",e.Default="default",e.EC2IAMRole="ec2_iam_role",e.ARN="arn",e))(f||{});const c=[{label:"Workspace IAM Role",value:f.EC2IAMRole},{label:"AWS SDK Default",value:f.Default},{label:"Access & secret key",value:f.Keys},{label:"Credentials file",value:f.Credentials}];var d=Object.defineProperty,p=Object.defineProperties,g=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,q=(e,t)=>{for(var n in t||(t={}))m.call(t,n)&&h(e,n,t[n]);if(y)for(var n of y(t))E.call(t,n)&&h(e,n,t[n]);return e},v=(e,t)=>p(e,g(t));const T=28,O=e=>({value:e,label:e});Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const b="__default";var w=Object.defineProperty,S=Object.defineProperties,R=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,N=(e,t,n)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function P(e){const[t,n]=r.useState(e.value||e.default||null),[l,a]=r.useState(t?[t]:[]),[u,f]=r.useState(e.dependencies),[c,d]=r.useState(!1),[p,g]=r.useState(!1),y=r.useMemo((()=>{const t=[{label:`default (${e.default})`,value:b,description:"Default value set in the data source"}];return e.value&&e.value!==b&&t.push({label:e.value,value:e.value}),t}),[e.default,e.value]),[m,E]=r.useState(e.default?y:[]);r.useEffect((()=>{void 0!==e.resources&&a(e.resources)}),[e.resources]),r.useEffect((()=>{const t=e.default?y:[];l.length?(l.forEach((e=>{const n="string"==typeof e?e:e.value;t.find((e=>e.value===n))||("string"==typeof e?t.push({label:e,value:e}):t.push(e))})),E(t)):E([])}),[l,y,e.default]),r.useEffect((()=>{s.isEqual(e.dependencies,u)||(g(!1),n(null),e.onChange(null),f(e.dependencies))}),[e,u]);return i.default.createElement(o.InlineField,{label:e.label,labelWidth:e.labelWidth,tooltip:e.tooltip,hidden:e.hidden},i.default.createElement("div",{"data-testid":e["data-testid"],title:e.title},i.default.createElement(o.Select,(h=((e,t)=>{for(var n in t||(t={}))C.call(t,n)&&N(e,n,t[n]);if(A)for(var n of A(t))I.call(t,n)&&N(e,n,t[n]);return e})({},e),q={"aria-label":e.label,options:m,onChange:t=>{e.onChange(t),t.value&&n(t.value)},isLoading:c,className:e.className||"min-width-6",onOpenMenu:()=>e.fetch&&(async()=>{d(!0);try{await(async()=>{var t;if(!p){e.saveOptions&&await e.saveOptions();try{const n=await(null==(t=e.fetch)?void 0:t.call(e))||[];a(n)}finally{g(!0)}}})()}finally{d(!1)}})(),menuShouldPortal:!0},S(h,R(q))))));var h,q}var D=Object.defineProperty,L=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,k=(e,t,n)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;t.B5=function(e){var t,n,r;const{jsonData:o}=e.options,l={title:o.defaultRegion?"":"select a default region",labelWidth:null!=(t=e.labelWidth)?t:T,className:"width-30"},s=[e.options.jsonData.assumeRoleArn,e.options.jsonData.authType,e.options.jsonData.defaultRegion,e.options.jsonData.endpoint,e.options.jsonData.externalId,e.options.jsonData.profile,null==(n=e.options.secureJsonData)?void 0:n.accessKey,null==(r=e.options.secureJsonData)?void 0:r.secretKey].concat(e.dependencies);return i.default.createElement(P,((e,t)=>{for(var n in t||(t={}))M.call(t,n)&&k(e,n,t[n]);if(L)for(var n of L(t))_.call(t,n)&&k(e,n,t[n]);return e})({label:e.label,"data-testid":e["data-testid"],onChange:e.onChange,fetch:e.fetch,value:e.value,saveOptions:e.saveOptions,dependencies:s,hidden:e.hidden,disabled:e.disabled||!o.defaultRegion,allowCustomValue:e.allowCustomValue,autoFocus:e.autoFocus,backspaceRemovesValue:e.backspaceRemovesValue,invalid:e.invalid,isClearable:e.isClearable,isMulti:e.isMulti,inputId:e.inputId,showAllSelectedWhenOpen:e.showAllSelectedWhenOpen,maxMenuHeight:e.maxMenuHeight,minMenuHeight:e.minMenuHeight,maxVisibleValues:e.maxVisibleValues,menuPlacement:e.menuPlacement,menuPosition:e.menuPosition,noOptionsMessage:e.noOptionsMessage,onBlur:e.onBlur,onCreateOption:e.onCreateOption,onInputChange:e.onInputChange,placeholder:e.placeholder,width:e.width,isOptionDisabled:e.isOptionDisabled},l))},t.mO=e=>{var t,n,s,a,d,p,g,y;const[m,E]=r.useState((e.standardRegions||u).map(O)),{loadRegions:h,onOptionsChange:b,skipHeader:w=!1,skipEndpoint:S=!1}=e,{labelWidth:R=T,options:A}=e;let C=A.jsonData.profile;void 0===C&&(C=A.database);const I=window.grafanaBootData.settings,N=r.useMemo((()=>{var e;return null!=(e=I.awsAllowedAuthProviders)?e:[f.Default,f.Keys,f.Credentials]}),[I.awsAllowedAuthProviders]),P=null==(t=I.awsAssumeRoleEnabled)||t,D=c.find((e=>e.value===A.jsonData.authType));return r.useEffect((()=>{!D&&N.length&&b(v(q({},A),{jsonData:v(q({},A.jsonData),{authType:N[0]})}))}),[D,A,b,N]),r.useEffect((()=>{h&&h().then((e=>E(e.map(O))))}),[h]),i.default.createElement(o.FieldSet,{label:w?"":"Connection Details","data-testid":"connection-config"},i.default.createElement(o.InlineField,{label:"Authentication Provider",labelWidth:R,tooltip:"Specify which AWS credentials chain to use."},i.default.createElement(o.Select,{"aria-label":"Authentication Provider",className:"width-30",value:D,options:c.filter((e=>N.includes(e.value))),defaultValue:A.jsonData.authType,onChange:t=>{l.onUpdateDatasourceJsonDataOptionSelect(e,"authType")(t)},menuShouldPortal:!0})),"credentials"===A.jsonData.authType&&i.default.createElement(o.InlineField,{label:"Credentials Profile Name",labelWidth:R,tooltip:"Credentials profile name, as specified in ~/.aws/credentials, leave blank for default."},i.default.createElement(o.Input,{"aria-label":"Credentials Profile Name",className:"width-30",placeholder:"default",value:C,onChange:l.onUpdateDatasourceJsonDataOption(e,"profile")})),"keys"===A.jsonData.authType&&i.default.createElement(i.default.Fragment,null,i.default.createElement(o.InlineField,{label:"Access Key ID",labelWidth:R},(null==(n=e.options.secureJsonFields)?void 0:n.accessKey)?i.default.createElement(o.ButtonGroup,{className:"width-30"},i.default.createElement(o.Input,{disabled:!0,placeholder:"Configured"}),i.default.createElement(o.ToolbarButton,{icon:"edit",tooltip:"Edit Access Key ID",type:"button",onClick:l.onUpdateDatasourceResetOption(e,"accessKey")})):i.default.createElement(o.Input,{"aria-label":"Access Key ID",className:"width-30",value:null!=(a=null==(s=A.secureJsonData)?void 0:s.accessKey)?a:"",onChange:l.onUpdateDatasourceSecureJsonDataOption(e,"accessKey")})),i.default.createElement(o.InlineField,{label:"Secret Access Key",labelWidth:R},(null==(d=e.options.secureJsonFields)?void 0:d.secretKey)?i.default.createElement(o.ButtonGroup,{className:"width-30"},i.default.createElement(o.Input,{disabled:!0,placeholder:"Configured"}),i.default.createElement(o.ToolbarButton,{icon:"edit",type:"button",tooltip:"Edit Secret Access Key",onClick:l.onUpdateDatasourceResetOption(e,"secretKey")})):i.default.createElement(o.Input,{"aria-label":"Secret Access Key",className:"width-30",value:null!=(g=null==(p=A.secureJsonData)?void 0:p.secretKey)?g:"",onChange:l.onUpdateDatasourceSecureJsonDataOption(e,"secretKey")}))),P&&i.default.createElement(i.default.Fragment,null,i.default.createElement(o.InlineField,{label:"Assume Role ARN",labelWidth:R,tooltip:"Optionally, specify the ARN of a role to assume. Specifying a role here will ensure that the selected authentication provider is used to assume the specified role rather than using the credentials directly. Leave blank if you don't need to assume a role at all"},i.default.createElement(o.Input,{"aria-label":"Assume Role ARN",className:"width-30",placeholder:"arn:aws:iam:*",value:A.jsonData.assumeRoleArn||"",onChange:l.onUpdateDatasourceJsonDataOption(e,"assumeRoleArn")})),i.default.createElement(o.InlineField,{label:"External ID",labelWidth:R,tooltip:"If you are assuming a role in another account, that has been created with an external ID, specify the external ID here."},i.default.createElement(o.Input,{"aria-label":"External ID",className:"width-30",placeholder:"External ID",value:A.jsonData.externalId||"",onChange:l.onUpdateDatasourceJsonDataOption(e,"externalId")}))),!S&&i.default.createElement(o.InlineField,{label:"Endpoint",labelWidth:R,tooltip:"Optionally, specify a custom endpoint for the service"},i.default.createElement(o.Input,{"aria-label":"Endpoint",className:"width-30",placeholder:null!=(y=e.defaultEndpoint)?y:"https://{service}.{region}.amazonaws.com",value:A.jsonData.endpoint||"",onChange:l.onUpdateDatasourceJsonDataOption(e,"endpoint")})),i.default.createElement(o.InlineField,{label:"Default Region",labelWidth:R,tooltip:"Specify the region, such as for US West (Oregon) use ` us-west-2 ` as the region."},i.default.createElement(o.Select,{"aria-label":"Default Region",className:"width-30",value:m.find((e=>e.value===A.jsonData.defaultRegion)),options:m,defaultValue:A.jsonData.defaultRegion,allowCustomValue:!0,onChange:l.onUpdateDatasourceJsonDataOptionSelect(e,"defaultRegion"),formatCreateLabel:e=>`Use region: ${e}`,menuShouldPortal:!0})),e.children)},t.Nw=P},853:(e,t,n)=>{var r,o,l,s,a,i,u,f,c,d=n(388),p=n(650),g=(r=p)&&"object"==typeof r&&"default"in r?r.default:r,y=n(305),m=n(545),E=function(){return(E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function h(e,t,n,r){return new(n||(n=Promise))((function(o,l){function s(e){try{i(r.next(e))}catch(e){l(e)}}function a(e){try{i(r.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}i((r=r.apply(e,t||[])).next())}))}function q(e,t){var n,r,o,l,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return l={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function a(l){return function(a){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,r=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){s=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){s.label=l[1];break}if(6===l[0]&&s.label<o[1]){s.label=o[1],o=l;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(l);break}o[2]&&s.ops.pop(),s.trys.pop();continue}l=t.call(e,s)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,a])}}}function v(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function T(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,l=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(o)throw o.error}}return s}function O(e,t,n){if(n||2===arguments.length)for(var r,o=0,l=t.length;o<l;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function b(e,n){var r,o,l,s=null==e?void 0:e.getPreviousNonWhiteSpaceToken(),a=null==e?void 0:e.getPreviousKeyword(),i=null===(l=null==e?void 0:e.getPreviousNonWhiteSpaceToken())||void 0===l?void 0:l.is(t.iv.Operator,"/"),u=n.list(),f=[];try{for(var c=v(u),d=c.next();!d.done;d=c.next()){var p=d.value;p.resolve(e,null!=a?a:null,null!=s?s:null,Boolean(i))&&f.push(p.id)}}catch(e){r={error:e}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}return 0===f.length?[t.fC.Unknown]:f}(o=t.$M||(t.$M={}))[o.Comparison=0]="Comparison",o[o.Logical=1]="Logical",(l=t.MacroType||(t.MacroType={}))[l.Value=0]="Value",l[l.Filter=1]="Filter",l[l.Group=2]="Group",l[l.Column=3]="Column",l[l.Table=4]="Table",(s=t.iv||(t.iv={})).Parenthesis="delimiter.parenthesis.sql",s.Whitespace="white.sql",s.Keyword="keyword.sql",s.Delimiter="delimiter.sql",s.Operator="operator.sql",s.Identifier="identifier.sql",s.IdentifierQuote="identifier.quote.sql",s.Type="type.sql",s.Function="predefined.sql",s.Number="number.sql",s.String="string.sql",s.Variable="variable.sql",(a=t.fC||(t.fC={})).Unknown="unknown",a.SelectKeyword="selectKeyword",a.WithKeyword="withKeyword",a.AfterSelectKeyword="afterSelectKeyword",a.AfterSelectArguments="afterSelectArguments",a.AfterSelectFuncFirstArgument="afterSelectFuncFirstArgument",a.SelectAlias="selectAlias",a.AfterFromKeyword="afterFromKeyword",a.AfterTable="afterTable",a.SchemaFuncFirstArgument="schemaFuncFirstArgument",a.SchemaFuncExtraArgument="schemaFuncExtraArgument",a.FromKeyword="fromKeyword",a.AfterFrom="afterFrom",a.WhereKeyword="whereKeyword",a.WhereComparisonOperator="whereComparisonOperator",a.WhereValue="whereValue",a.AfterWhereFunctionArgument="afterWhereFunctionArgument",a.AfterGroupByFunctionArgument="afterGroupByFunctionArgument",a.AfterWhereValue="afterWhereValue",a.AfterGroupByKeywords="afterGroupByKeywords",a.AfterGroupBy="afterGroupBy",a.AfterOrderByKeywords="afterOrderByKeywords",a.AfterOrderByFunction="afterOrderByFunction",a.AfterOrderByDirection="afterOrderByDirection",a.AfterIsOperator="afterIsOperator",a.AfterIsNotOperator="afterIsNotOperator",a.AfterSchema="afterSchema",(i=t.is||(t.is={})).Schemas="schemas",i.Tables="tables",i.Columns="columns",i.SelectKeyword="selectKeyword",i.WithKeyword="withKeyword",i.FunctionsWithArguments="functionsWithArguments",i.FromKeyword="fromKeyword",i.WhereKeyword="whereKeyword",i.GroupByKeywords="groupByKeywords",i.OrderByKeywords="orderByKeywords",i.FunctionsWithoutArguments="functionsWithoutArguments",i.LimitKeyword="limitKeyword",i.SortOrderDirectionKeyword="sortOrderDirectionKeyword",i.ComparisonOperators="comparisonOperators",i.LogicalOperators="logicalOperators",i.SelectMacro="selectMacro",i.TableMacro="tableMacro",i.FilterMacro="filterMacro",i.GroupMacro="groupMacro",i.BoolValues="boolValues",i.NullValue="nullValue",i.NotKeyword="notKeyword",i.TemplateVariables="templateVariables",i.StarWildCard="starWildCard",(u=t.G8||(t.G8={})).High="a",u.MediumHigh="d",u.Medium="g",u.MediumLow="k",u.Low="q",(f=t.cm||(t.cm={}))[f.Method=0]="Method",f[f.Function=1]="Function",f[f.Constructor=2]="Constructor",f[f.Field=3]="Field",f[f.Variable=4]="Variable",f[f.Class=5]="Class",f[f.Struct=6]="Struct",f[f.Interface=7]="Interface",f[f.Module=8]="Module",f[f.Property=9]="Property",f[f.Event=10]="Event",f[f.Operator=11]="Operator",f[f.Unit=12]="Unit",f[f.Value=13]="Value",f[f.Constant=14]="Constant",f[f.Enum=15]="Enum",f[f.EnumMember=16]="EnumMember",f[f.Keyword=17]="Keyword",f[f.Text=18]="Text",f[f.Color=19]="Color",f[f.File=20]="File",f[f.Reference=21]="Reference",f[f.Customcolor=22]="Customcolor",f[f.Folder=23]="Folder",f[f.TypeParameter=24]="TypeParameter",f[f.User=25]="User",f[f.Issue=26]="Issue",f[f.Snippet=27]="Snippet",(c=t.a7||(t.a7={}))[c.KeepWhitespace=1]="KeepWhitespace",c[c.InsertAsSnippet=4]="InsertAsSnippet";var w=function(e,n,r,o,l){return h(void 0,void 0,void 0,(function(){var s,a,i,u,f,c,d,p,g,y,m;return q(this,(function(h){switch(h.label){case 0:s=[],a=(null==n?void 0:n.isWhiteSpace())||(null==n?void 0:n.isParenthesis())||(null==n?void 0:n.isIdentifier())&&n.value.endsWith("."),i=a||!(null==n?void 0:n.range)?e.Range.fromPositions(o.position):null==n?void 0:n.range,h.label=1;case 1:h.trys.push([1,6,7,8]),u=v(O([],T(new Set(r)),!1)),f=u.next(),h.label=2;case 2:return f.done?[3,5]:(c=f.value,(d=l.getIfExists(c))?[4,d.suggestions(E(E({},o),{range:i}),e)]:[3,4]);case 3:p=h.sent(),s=O(O([],T(s),!1),T(p.map((function(e){return function(e,n,r){return void 0===r&&(r={}),E({label:e,insertText:e,kind:t.cm.Field,sortText:t.G8.Medium,range:n},r)}(e.label,i,E({kind:e.kind},e))}))),!1),h.label=4;case 4:return f=u.next(),[3,2];case 5:return[3,8];case 6:return g=h.sent(),y={error:g},[3,8];case 7:try{f&&!f.done&&(m=u.return)&&m.call(u)}finally{if(y)throw y.error}return[7];case 8:return[2,Promise.resolve(s)]}}))}))},S=function(){return[{id:t.fC.SelectKeyword,name:t.fC.SelectKeyword,kind:[t.is.SelectKeyword]},{id:t.fC.WithKeyword,name:t.fC.WithKeyword,kind:[t.is.WithKeyword]},{id:t.fC.AfterSelectKeyword,name:t.fC.AfterSelectKeyword,kind:[t.is.StarWildCard,t.is.FunctionsWithArguments,t.is.Columns,t.is.SelectMacro]},{id:t.fC.AfterSelectFuncFirstArgument,name:t.fC.AfterSelectFuncFirstArgument,kind:[t.is.Columns]},{id:t.fC.AfterGroupByFunctionArgument,name:t.fC.AfterGroupByFunctionArgument,kind:[t.is.Columns]},{id:t.fC.AfterWhereFunctionArgument,name:t.fC.AfterWhereFunctionArgument,kind:[t.is.Columns]},{id:t.fC.AfterSelectArguments,name:t.fC.AfterSelectArguments,kind:[t.is.Columns]},{id:t.fC.AfterFromKeyword,name:t.fC.AfterFromKeyword,kind:[t.is.Schemas,t.is.Tables,t.is.TableMacro]},{id:t.fC.AfterSchema,name:t.fC.AfterSchema,kind:[t.is.Tables,t.is.TableMacro]},{id:t.fC.SelectAlias,name:t.fC.SelectAlias,kind:[t.is.Columns,t.is.FunctionsWithArguments]},{id:t.fC.FromKeyword,name:t.fC.FromKeyword,kind:[t.is.FromKeyword]},{id:t.fC.AfterFrom,name:t.fC.AfterFrom,kind:[t.is.WhereKeyword,t.is.GroupByKeywords,t.is.OrderByKeywords,t.is.LimitKeyword]},{id:t.fC.AfterTable,name:t.fC.AfterTable,kind:[t.is.WhereKeyword,t.is.GroupByKeywords,t.is.OrderByKeywords,t.is.LimitKeyword]},{id:t.fC.WhereKeyword,name:t.fC.WhereKeyword,kind:[t.is.Columns,t.is.FilterMacro,t.is.TemplateVariables]},{id:t.fC.WhereComparisonOperator,name:t.fC.WhereComparisonOperator,kind:[t.is.ComparisonOperators]},{id:t.fC.WhereValue,name:t.fC.WhereValue,kind:[t.is.FilterMacro,t.is.TemplateVariables]},{id:t.fC.AfterWhereValue,name:t.fC.AfterWhereValue,kind:[t.is.LogicalOperators,t.is.GroupByKeywords,t.is.OrderByKeywords,t.is.LimitKeyword,t.is.Columns,t.is.TemplateVariables]},{id:t.fC.AfterGroupByKeywords,name:t.fC.AfterGroupByKeywords,kind:[t.is.GroupMacro,t.is.Columns]},{id:t.fC.AfterGroupBy,name:t.fC.AfterGroupBy,kind:[t.is.OrderByKeywords,t.is.LimitKeyword]},{id:t.fC.AfterOrderByKeywords,name:t.fC.AfterOrderByKeywords,kind:[t.is.Columns]},{id:t.fC.AfterOrderByFunction,name:t.fC.AfterOrderByFunction,kind:[t.is.SortOrderDirectionKeyword,t.is.LimitKeyword]},{id:t.fC.AfterOrderByDirection,name:t.fC.AfterOrderByDirection,kind:[t.is.LimitKeyword]},{id:t.fC.AfterIsOperator,name:t.fC.AfterOrderByDirection,kind:[t.is.NotKeyword,t.is.NullValue,t.is.BoolValues]},{id:t.fC.AfterIsNotOperator,name:t.fC.AfterOrderByDirection,kind:[t.is.NullValue,t.is.BoolValues]}]},R=function(){function e(e,t,n,r,o){this.type=e,this.value=t,this.range=n,this.previous=r,this.next=o}return e.prototype.isKeyword=function(){return this.type===t.iv.Keyword},e.prototype.isWhiteSpace=function(){return this.type===t.iv.Whitespace},e.prototype.isParenthesis=function(){return this.type===t.iv.Parenthesis},e.prototype.isIdentifier=function(){return this.type===t.iv.Identifier},e.prototype.isString=function(){return this.type===t.iv.String},e.prototype.isNumber=function(){return this.type===t.iv.Number},e.prototype.isDoubleQuotedString=function(){return this.type===t.iv.Type},e.prototype.isVariable=function(){return this.type===t.iv.Variable},e.prototype.isFunction=function(){return this.type===t.iv.Function},e.prototype.isOperator=function(){return this.type===t.iv.Operator},e.prototype.isTemplateVariable=function(){return this.type===t.iv.Variable},e.prototype.is=function(e,t){var n=this.type===e;return void 0!==t?n&&A(e,this,t):n},e.prototype.getPreviousNonWhiteSpaceToken=function(){for(var e=this.previous;null!=e;){if(!e.isWhiteSpace())return e;e=e.previous}return null},e.prototype.getPreviousOfType=function(e,t){for(var n=this.previous;null!=n;){var r=n.type===e;if(void 0!==t?r&&A(e,n,t):r)return n;n=n.previous}return null},e.prototype.getPreviousUntil=function(e,t,n){for(var r=[],o=this.previous;null!=o;)if(t.some((function(e){return e===(null==o?void 0:o.type)})))o=o.previous;else{var l=o.type===e;if(void 0!==n?l&&A(e,o,n):l)return r;o.isWhiteSpace()||r.push(o),o=o.previous}return r},e.prototype.getNextUntil=function(e,t,n){for(var r=[],o=this.next;null!=o;)if(t.some((function(e){return e===(null==o?void 0:o.type)})))o=o.next;else{var l=o.type===e;if(void 0!==n?l&&A(e,o,n):l)return r;o.isWhiteSpace()||r.push(o),o=o.next}return r},e.prototype.getPreviousKeyword=function(){for(var e=this.previous;null!=e;){if(e.isKeyword())return e;e=e.previous}return null},e.prototype.getNextNonWhiteSpaceToken=function(){for(var e=this.next;null!=e;){if(!e.isWhiteSpace())return e;e=e.next}return null},e.prototype.getNextOfType=function(e,t){for(var n=this.next;null!=n;){var r=n.type===e;if(void 0!==t?r&&A(e,n,t):r)return n;n=n.next}return null},e}();function A(e,n,r){return e===t.iv.Keyword||e===t.iv.Operator?n.value.toLowerCase()===r.toString().toLowerCase():n.value===r}function C(e,n,r,o){var l;void 0===o&&(o="sql");for(var s=null,a=null,i=e.editor.tokenize(null!==(l=n.getValue())&&void 0!==l?l:"",o),u=0;u<i.length;u++){var f=i[u];if(!f.length&&a){var c={offset:0,type:t.iv.Whitespace,language:o,_tokenBrand:void 0};f.push(c)}for(var d=0;d<f.length;d++){c=f[d];var p=f.length>d+1?f[d+1].offset+1:n.getLineLength(u+1)+1,g={startLineNumber:u+1,startColumn:0===c.offset?0:c.offset+1,endLineNumber:u+1,endColumn:p},y=n.getValueInRange(g),m=new R(c.type,y,g,a,null);e.Range.containsPosition(g,r)&&(s=m),a&&(a.next=m),a=m}}return s}var I,N="select",P="from",D="by",L="desc",M="asc",_=["=","!="],k=O([],T(_),!1),F={comments:{lineComment:"--",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},x={defaultToken:"",tokenPostfix:".sql",ignoreCase:!0,brackets:[{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["ABORT","ABSOLUTE","ACTION","ADA","ADD","AFTER","ALL","ALLOCATE","ALTER","ALWAYS","ANALYZE","AND","ANY","ARE","AS","ASC","ASSERTION","AT","ATTACH","AUTHORIZATION","AUTOINCREMENT","AVG","BACKUP","BEFORE","BEGIN","BETWEEN","BIT","BIT_LENGTH","BOTH","BREAK","BROWSE","BULK","BY","CASCADE","CASCADED","CASE","CAST","CATALOG","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CHECKPOINT","CLOSE","CLUSTERED","COALESCE","COLLATE","COLLATION","COLUMN","COMMIT","COMPUTE","CONFLICT","CONNECT","CONNECTION","CONSTRAINT","CONSTRAINTS","CONTAINS","CONTAINSTABLE","CONTINUE","CONVERT","CORRESPONDING","COUNT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATE","DAY","DBCC","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DENY","DESC","DESCRIBE","DESCRIPTOR","DETACH","DIAGNOSTICS","DISCONNECT","DISK","DISTINCT","DISTRIBUTED","DO","DOMAIN","DOUBLE","DROP","DUMP","EACH","ELSE","END","END-EXEC","ERRLVL","ESCAPE","EXCEPT","EXCEPTION","EXCLUDE","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXPLAIN","EXTERNAL","EXTRACT","FAIL","FALSE","FETCH","FILE","FILLFACTOR","FILTER","FIRST","FLOAT","FOLLOWING","FOR","FOREIGN","FORTRAN","FOUND","FREETEXT","FREETEXTTABLE","FROM","FULL","FUNCTION","GENERATED","GET","GLOB","GLOBAL","GO","GOTO","GRANT","GROUP","GROUPS","HAVING","HOLDLOCK","HOUR","IDENTITY","IDENTITYCOL","IDENTITY_INSERT","IF","IGNORE","IMMEDIATE","IN","INCLUDE","INDEX","INDEXED","INDICATOR","INITIALLY","INNER","INPUT","INSENSITIVE","INSERT","INSTEAD","INT","INTEGER","INTERSECT","INTERVAL","INTO","IS","ISNULL","ISOLATION","JOIN","KEY","KILL","LANGUAGE","LAST","LEADING","LEFT","LEVEL","LIKE","LIMIT","LINENO","LOAD","LOCAL","LOWER","MATCH","MATERIALIZED","MAX","MERGE","MIN","MINUTE","MODULE","MONTH","NAMES","NATIONAL","NATURAL","NCHAR","NEXT","NO","NOCHECK","NONCLUSTERED","NONE","NOT","NOTHING","NOTNULL","NULL","NULLIF","NULLS","NUMERIC","OCTET_LENGTH","OF","OFF","OFFSET","OFFSETS","ON","ONLY","OPEN","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","OPTION","OR","ORDER","OTHERS","OUTER","OUTPUT","OVER","OVERLAPS","PAD","PARTIAL","PARTITION","PASCAL","PERCENT","PIVOT","PLAN","POSITION","PRAGMA","PRECEDING","PRECISION","PREPARE","PRESERVE","PRIMARY","PRINT","PRIOR","PRIVILEGES","PROC","PROCEDURE","PUBLIC","QUERY","RAISE","RAISERROR","RANGE","READ","READTEXT","REAL","RECONFIGURE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELATIVE","RELEASE","RENAME","REPLACE","REPLICATION","RESTORE","RESTRICT","RETURN","RETURNING","REVERT","REVOKE","RIGHT","ROLLBACK","ROW","ROWCOUNT","ROWGUIDCOL","ROWS","RULE","SAVE","SAVEPOINT","SCHEMA","SCROLL","SECOND","SECTION","SECURITYAUDIT","SELECT","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","SESSION","SESSION_USER","SET","SETUSER","SHUTDOWN","SIZE","SMALLINT","SOME","SPACE","SQL","SQLCA","SQLCODE","SQLERROR","SQLSTATE","SQLWARNING","STATISTICS","SUBSTRING","SUM","SYSTEM_USER","TABLE","TABLESAMPLE","TEMP","TEMPORARY","TEXTSIZE","THEN","TIES","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TOP","TRAILING","TRAN","TRANSACTION","TRANSLATE","TRANSLATION","TRIGGER","TRIM","TRUE","TRUNCATE","TRY_CONVERT","TSEQUAL","UNBOUNDED","UNION","UNIQUE","UNKNOWN","UNPIVOT","UPDATE","UPDATETEXT","UPPER","USAGE","USE","USER","USING","VACUUM","VALUE","VALUES","VARCHAR","VARYING","VIEW","VIRTUAL","WAITFOR","WHEN","WHENEVER","WHERE","WHILE","WINDOW","WITH","WITHIN GROUP","WITHOUT","WORK","WRITE","WRITETEXT","YEAR","ZONE"],operators:["EXCEPT","INTERSECT","UNION","APPLY","CROSS","FULL","INNER","JOIN","LEFT","OUTER","RIGHT","CONTAINS","FREETEXT","IS","NULL","PIVOT","UNPIVOT","MATCHED"],logicalOperators:["ALL","AND","ANY","BETWEEN","EXISTS","IN","LIKE","NOT","OR","SOME"],comparisonOperators:["<>",">","<",">=","<=","=","!=","&","~","^","%"],builtinFunctions:["AVG","CHECKSUM_AGG","COUNT","COUNT_BIG","GROUPING","GROUPING_ID","MAX","MIN","SUM","STDEV","STDEVP","VAR","VARP","CUME_DIST","FIRST_VALUE","LAG","LAST_VALUE","LEAD","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","COLLATE","COLLATIONPROPERTY","TERTIARY_WEIGHTS","FEDERATION_FILTERING_VALUE","CAST","CONVERT","PARSE","TRY_CAST","TRY_CONVERT","TRY_PARSE","ASYMKEY_ID","ASYMKEYPROPERTY","CERTPROPERTY","CERT_ID","CRYPT_GEN_RANDOM","DECRYPTBYASYMKEY","DECRYPTBYCERT","DECRYPTBYKEY","DECRYPTBYKEYAUTOASYMKEY","DECRYPTBYKEYAUTOCERT","DECRYPTBYPASSPHRASE","ENCRYPTBYASYMKEY","ENCRYPTBYCERT","ENCRYPTBYKEY","ENCRYPTBYPASSPHRASE","HASHBYTES","IS_OBJECTSIGNED","KEY_GUID","KEY_ID","KEY_NAME","SIGNBYASYMKEY","SIGNBYCERT","SYMKEYPROPERTY","VERIFYSIGNEDBYCERT","VERIFYSIGNEDBYASYMKEY","CURSOR_STATUS","DATALENGTH","IDENT_CURRENT","IDENT_INCR","IDENT_SEED","IDENTITY","SQL_VARIANT_PROPERTY","CURRENT_TIMESTAMP","DATEADD","DATEDIFF","DATEFROMPARTS","DATENAME","DATEPART","DATETIME2FROMPARTS","DATETIMEFROMPARTS","DATETIMEOFFSETFROMPARTS","DAY","EOMONTH","GETDATE","GETUTCDATE","ISDATE","MONTH","SMALLDATETIMEFROMPARTS","SWITCHOFFSET","SYSDATETIME","SYSDATETIMEOFFSET","SYSUTCDATETIME","TIMEFROMPARTS","TODATETIMEOFFSET","YEAR","CHOOSE","COALESCE","IIF","NULLIF","ABS","ACOS","ASIN","ATAN","ATN2","CEILING","COS","COT","DEGREES","EXP","FLOOR","LOG","LOG10","PI","POWER","RADIANS","RAND","ROUND","SIGN","SIN","SQRT","SQUARE","TAN","APP_NAME","APPLOCK_MODE","APPLOCK_TEST","ASSEMBLYPROPERTY","COL_LENGTH","COL_NAME","COLUMNPROPERTY","DATABASE_PRINCIPAL_ID","DATABASEPROPERTYEX","DB_ID","DB_NAME","FILE_ID","FILE_IDEX","FILE_NAME","FILEGROUP_ID","FILEGROUP_NAME","FILEGROUPPROPERTY","FILEPROPERTY","FULLTEXTCATALOGPROPERTY","FULLTEXTSERVICEPROPERTY","INDEX_COL","INDEXKEY_PROPERTY","INDEXPROPERTY","OBJECT_DEFINITION","OBJECT_ID","OBJECT_NAME","OBJECT_SCHEMA_NAME","OBJECTPROPERTY","OBJECTPROPERTYEX","ORIGINAL_DB_NAME","PARSENAME","SCHEMA_ID","SCHEMA_NAME","SCOPE_IDENTITY","SERVERPROPERTY","STATS_DATE","TYPE_ID","TYPE_NAME","TYPEPROPERTY","DENSE_RANK","NTILE","RANK","ROW_NUMBER","PUBLISHINGSERVERNAME","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","CERTENCODED","CERTPRIVATEKEY","CURRENT_USER","HAS_DBACCESS","HAS_PERMS_BY_NAME","IS_MEMBER","IS_ROLEMEMBER","IS_SRVROLEMEMBER","LOGINPROPERTY","ORIGINAL_LOGIN","PERMISSIONS","PWDENCRYPT","PWDCOMPARE","SESSION_USER","SESSIONPROPERTY","SUSER_ID","SUSER_NAME","SUSER_SID","SUSER_SNAME","SYSTEM_USER","USER","USER_ID","USER_NAME","ASCII","CHAR","CHARINDEX","CONCAT","DIFFERENCE","FORMAT","LEFT","LEN","LOWER","LTRIM","NCHAR","PATINDEX","QUOTENAME","REPLACE","REPLICATE","REVERSE","RIGHT","RTRIM","SOUNDEX","SPACE","STR","STUFF","SUBSTRING","UNICODE","UPPER","BINARY_CHECKSUM","CHECKSUM","CONNECTIONPROPERTY","CONTEXT_INFO","CURRENT_REQUEST_ID","ERROR_LINE","ERROR_NUMBER","ERROR_MESSAGE","ERROR_PROCEDURE","ERROR_SEVERITY","ERROR_STATE","FORMATMESSAGE","GETANSINULL","GET_FILESTREAM_TRANSACTION_CONTEXT","HOST_ID","HOST_NAME","ISNULL","ISNUMERIC","MIN_ACTIVE_ROWVERSION","NEWID","NEWSEQUENTIALID","ROWCOUNT_BIG","XACT_STATE","TEXTPTR","TEXTVALID","COLUMNS_UPDATED","EVENTDATA","TRIGGER_NESTLEVEL","UPDATE","CHANGETABLE","CHANGE_TRACKING_CONTEXT","CHANGE_TRACKING_CURRENT_VERSION","CHANGE_TRACKING_IS_COLUMN_IN_MASK","CHANGE_TRACKING_MIN_VALID_VERSION","CONTAINSTABLE","FREETEXTTABLE","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","FILETABLEROOTPATH","GETFILENAMESPACEPATH","GETPATHLOCATOR","PATHNAME","GET_TRANSMISSION_STATUS"],builtinVariables:["@@DATEFIRST","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","@@CURSOR_ROWS","@@FETCH_STATUS","@@DATEFIRST","@@PROCID","@@ERROR","@@IDENTITY","@@ROWCOUNT","@@TRANCOUNT","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACKET_ERRORS","@@PACK_RECEIVED","@@PACK_SENT","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE"],pseudoColumns:["$ACTION","$IDENTITY","$ROWGUID","$PARTITION"],tokenizer:{root:[{include:"@templateVariables"},{include:"@macros"},{include:"@comments"},{include:"@whitespace"},{include:"@pseudoColumns"},{include:"@numbers"},{include:"@strings"},{include:"@complexIdentifiers"},{include:"@scopes"},{include:"@schemaTable"},[/[;,.]/,"delimiter"],[/[()]/,"@brackets"],[/[\w@#$|<|>|=|!|%|&|+|\|-|*|/|~|^]+/,{cases:{"@operators":"operator","@comparisonOperators":"operator","@logicalOperators":"operator","@builtinVariables":"predefined","@builtinFunctions":"predefined","@keywords":"keyword","@default":"identifier"}}]],templateVariables:[[/\$[a-zA-Z0-9]+/,"variable"]],macros:[[/\$__[a-zA-Z0-9-_]+/,"type"]],schemaTable:[[/(\w+)\./,"identifier"],[/(\w+\.\w+)/,"identifier"]],whitespace:[[/\s+/,"white"]],comments:[[/--+.*/,"comment"],[/\/\*/,{token:"comment.quote",next:"@comment"}]],comment:[[/[^*/]+/,"comment"],[/\*\//,{token:"comment.quote",next:"@pop"}],[/./,"comment"]],pseudoColumns:[[/[$][A-Za-z_][\w@#$]*/,{cases:{"@pseudoColumns":"predefined","@default":"identifier"}}]],numbers:[[/0[xX][0-9a-fA-F]*/,"number"],[/[$][+-]*\d*(\.\d*)?/,"number"],[/((\d+(\.\d*)?)|(\.\d+))([eE][\-+]?\d+)?/,"number"]],strings:[[/N'/,{token:"string",next:"@string"}],[/'/,{token:"string",next:"@string"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string",next:"@pop"}]],complexIdentifiers:[[/\[/,{token:"identifier.quote",next:"@bracketedIdentifier"}],[/"/,{token:"identifier.quote",next:"@quotedIdentifier"}]],bracketedIdentifier:[[/[^\]]+/,"identifier"],[/]]/,"identifier"],[/]/,{token:"identifier.quote",next:"@pop"}]],quotedIdentifier:[[/[^"]+/,"identifier"],[/""/,"identifier"],[/"/,{token:"identifier.quote",next:"@pop"}]],scopes:[[/BEGIN\s+(DISTRIBUTED\s+)?TRAN(SACTION)?\b/i,"keyword"],[/BEGIN\s+TRY\b/i,{token:"keyword.try"}],[/END\s+TRY\b/i,{token:"keyword.try"}],[/BEGIN\s+CATCH\b/i,{token:"keyword.catch"}],[/END\s+CATCH\b/i,{token:"keyword.catch"}],[/(BEGIN|CASE)\b/i,{token:"keyword.block"}],[/END\b/i,{token:"keyword.block"}],[/WHEN\b/i,{token:"keyword.choice"}],[/THEN\b/i,{token:"keyword.choice"}]]}},K=Object.freeze({__proto__:null,SELECT:N,FROM:P,WHERE:"where",GROUP:"group",ORDER:"order",BY:D,DESC:L,ASC:M,LIMIT:"limit",WITH:"with",AS:"as",SCHEMA:"schema",AND:"AND",OR:"OR",LOGICAL_OPERATORS:["AND","OR"],EQUALS:"=",NOT_EQUALS:"!=",COMPARISON_OPERATORS:_,STD_OPERATORS:k,conf:F,language:x}),U=function(e){var n,r=function(e){var n=function(e){var n;return null!==(n=null==e?void 0:e.getPreviousOfType(t.iv.Keyword,N))&&void 0!==n?n:null}(e);return null==n?void 0:n.getNextOfType(t.iv.Keyword,P)}(e),o=null==r?void 0:r.getNextNonWhiteSpaceToken();return(null==o?void 0:o.isVariable())||(null==o?void 0:o.isKeyword())&&(null===(n=o.next)||void 0===n?void 0:n.is(t.iv.Parenthesis,"("))?null:o},B=function(e){var t=null==e?void 0:e.value.split(".");return 1===(null==t?void 0:t.length)?{table:t[0]}:2===(null==t?void 0:t.length)?{schema:t[0],table:t[1]}:null},j={id:"editor.action.triggerSuggest",title:""},G=new Uint8Array(16);function W(){if(!I&&!(I="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return I(G)}var Y=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function V(e){return"string"==typeof e&&Y.test(e)}for(var H=[],$=0;$<256;++$)H.push(($+256).toString(16).substr(1));function Q(e,t,n){var r=(e=e||{}).random||(e.rng||W)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(H[e[t+0]]+H[e[t+1]]+H[e[t+2]]+H[e[t+3]]+"-"+H[e[t+4]]+H[e[t+5]]+"-"+H[e[t+6]]+H[e[t+7]]+"-"+H[e[t+8]]+H[e[t+9]]+"-"+H[e[t+10]]+H[e[t+11]]+H[e[t+12]]+H[e[t+13]]+H[e[t+14]]+H[e[t+15]]).toLowerCase();if(!V(n))throw TypeError("Stringified UUID is invalid");return n}(r)}function X(e){return{label:e.name,insertText:"".concat("\\"+e.text).concat(J(e.args)," "),insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Snippet,documentation:e.description,command:j}}function J(e){return e?"(".concat(e.map((function(e,t){return"${".concat(t,":").concat(e,"}")})).join(", ")).concat(")"):"()"}function z(){return[{id:t.fC.SelectKeyword,name:t.fC.SelectKeyword,resolve:function(e,n,r,o){return Boolean(null===e||e.isWhiteSpace()&&null===e.previous||e.is(t.iv.Keyword,N)||e.is(t.iv.Keyword,N)&&null===e.previous||o||e.isIdentifier()&&(o||null===(null==e?void 0:e.previous))||e.isIdentifier()&&N.startsWith(e.value.toLowerCase()))}},{id:t.fC.WithKeyword,name:t.fC.WithKeyword,resolve:function(e,n,r,o){return Boolean(null===e||e.isWhiteSpace()&&null===e.previous||e.is(t.iv.Keyword,"with")&&null===e.previous||e.isIdentifier()&&"with".toLowerCase().startsWith(e.value.toLowerCase()))}},{id:t.fC.AfterSelectKeyword,name:t.fC.AfterSelectKeyword,resolve:function(e,t,n,r){return Boolean((null==n?void 0:n.value.toLowerCase())===N)}},{id:t.fC.AfterSelectArguments,name:t.fC.AfterSelectArguments,resolve:function(e,t,n,r){return Boolean((null==t?void 0:t.value.toLowerCase())===N&&","===(null==n?void 0:n.value))}},{id:t.fC.AfterSelectFuncFirstArgument,name:t.fC.AfterSelectFuncFirstArgument,resolve:function(e,n,r,o){return Boolean(((null==n?void 0:n.value.toLowerCase())===N||"as"===(null==n?void 0:n.value.toLowerCase()))&&((null==r?void 0:r.is(t.iv.Parenthesis,"("))||(null==e?void 0:e.is(t.iv.Parenthesis,"()"))))}},{id:t.fC.AfterWhereFunctionArgument,name:t.fC.AfterWhereFunctionArgument,resolve:function(e,n,r,o){return Boolean((null==n?void 0:n.is(t.iv.Keyword,"where"))&&((null==r?void 0:r.is(t.iv.Parenthesis,"("))||(null==e?void 0:e.is(t.iv.Parenthesis,"()"))))}},{id:t.fC.AfterGroupBy,name:t.fC.AfterGroupBy,resolve:function(e,n,r,o){var l;return Boolean((null==n?void 0:n.is(t.iv.Keyword,D))&&(null===(l=null==n?void 0:n.getPreviousKeyword())||void 0===l?void 0:l.is(t.iv.Keyword,"group"))&&((null==r?void 0:r.isIdentifier())||(null==r?void 0:r.isDoubleQuotedString())||(null==r?void 0:r.is(t.iv.Parenthesis,")"))||(null==r?void 0:r.is(t.iv.Parenthesis,"()"))))}},{id:t.fC.SelectAlias,name:t.fC.SelectAlias,resolve:function(e,t,n,r){return","===(null==n?void 0:n.value)&&"as"===(null==t?void 0:t.value.toLowerCase())}},{id:t.fC.FromKeyword,name:t.fC.FromKeyword,resolve:function(e,t,n,r){return Boolean((null==t?void 0:t.value.toLowerCase())===N&&","!==(null==n?void 0:n.value)||((null==e?void 0:e.isKeyword())||(null==e?void 0:e.isIdentifier()))&&P.toLowerCase().startsWith(e.value.toLowerCase()))}},{id:t.fC.AfterFromKeyword,name:t.fC.AfterFromKeyword,resolve:function(e,t,n,r){return Boolean(!(null==e?void 0:e.value.includes("."))&&(null==n?void 0:n.value.toLowerCase())===P)}},{id:t.fC.AfterSchema,name:t.fC.AfterSchema,resolve:function(e,t,n,r){return(null==e?void 0:e.isWhiteSpace())&&(null==e?void 0:e.next)&&(n=null==(e=null==e?void 0:e.previous)?void 0:e.getPreviousNonWhiteSpaceToken()),Boolean((null==e?void 0:e.isIdentifier())&&(null==e?void 0:e.value.endsWith("."))&&(null==n?void 0:n.value.toLowerCase())===P)}},{id:t.fC.AfterFrom,name:t.fC.AfterFrom,resolve:function(e,t,n,r){return Boolean((null==t?void 0:t.value.toLowerCase())===P&&(null==n?void 0:n.isDoubleQuotedString())||(null==t?void 0:t.value.toLowerCase())===P&&(null==n?void 0:n.isIdentifier())||(null==t?void 0:t.value.toLowerCase())===P&&(null==n?void 0:n.isVariable()))}},{id:t.fC.AfterTable,name:t.fC.AfterTable,resolve:function(e,t,n,r){return Boolean((null==t?void 0:t.value.toLowerCase())===P&&((null==n?void 0:n.isVariable())||""!==(null==n?void 0:n.value)&&(null==n?void 0:n.value.toLowerCase())!==P))}},{id:t.fC.WhereKeyword,name:t.fC.WhereKeyword,resolve:function(e,n,r,o){return Boolean("where"===(null==n?void 0:n.value.toLowerCase())&&((null==r?void 0:r.isKeyword())||(null==r?void 0:r.is(t.iv.Parenthesis,"("))||(null==r?void 0:r.is(t.iv.Operator,"AND"))))}},{id:t.fC.WhereComparisonOperator,name:t.fC.WhereComparisonOperator,resolve:function(e,n,r,o){return Boolean("where"===(null==n?void 0:n.value.toLowerCase())&&!(null==r?void 0:r.getPreviousNonWhiteSpaceToken().isOperator())&&!e.is(t.iv.Delimiter,".")&&!e.isParenthesis()&&((null==r?void 0:r.isIdentifier())||(null==r?void 0:r.isDoubleQuotedString())))}},{id:t.fC.WhereValue,name:t.fC.WhereValue,resolve:function(e,t,n,r){return Boolean("where"===(null==t?void 0:t.value.toLowerCase())&&(null==n?void 0:n.isOperator()))}},{id:t.fC.AfterWhereValue,name:t.fC.AfterWhereValue,resolve:function(e,n,r,o){var l,s,a;return Boolean("where"===(null==n?void 0:n.value.toLowerCase())&&(r.is(t.iv.Operator,"and")||r.is(t.iv.Operator,"or")||(null==r?void 0:r.isString())||(null==r?void 0:r.isNumber())||(null==r?void 0:r.is(t.iv.Parenthesis,")"))||(null==r?void 0:r.is(t.iv.Parenthesis,"()"))||(null==r?void 0:r.isTemplateVariable())||(null==r?void 0:r.is(t.iv.IdentifierQuote))&&(null===(l=r.getPreviousNonWhiteSpaceToken())||void 0===l?void 0:l.is(t.iv.Identifier))&&(null===(a=null===(s=null==r?void 0:r.getPreviousNonWhiteSpaceToken())||void 0===s?void 0:s.getPreviousNonWhiteSpaceToken())||void 0===a?void 0:a.is(t.iv.IdentifierQuote))))}},{id:t.fC.AfterGroupByKeywords,name:t.fC.AfterGroupByKeywords,resolve:function(e,n,r,o){var l;return Boolean((null==n?void 0:n.is(t.iv.Keyword,D))&&(null===(l=null==n?void 0:n.getPreviousKeyword())||void 0===l?void 0:l.is(t.iv.Keyword,"group"))&&((null==r?void 0:r.is(t.iv.Keyword,D))||(null==r?void 0:r.is(t.iv.Delimiter,","))))}},{id:t.fC.AfterGroupByFunctionArgument,name:t.fC.AfterGroupByFunctionArgument,resolve:function(e,n,r,o){var l;return Boolean((null==n?void 0:n.is(t.iv.Keyword,D))&&(null===(l=null==n?void 0:n.getPreviousKeyword())||void 0===l?void 0:l.is(t.iv.Keyword,"group"))&&((null==r?void 0:r.is(t.iv.Parenthesis,"("))||(null==e?void 0:e.is(t.iv.Parenthesis,"()"))))}},{id:t.fC.AfterOrderByKeywords,name:t.fC.AfterOrderByKeywords,resolve:function(e,n,r,o){var l;return Boolean((null==r?void 0:r.is(t.iv.Keyword,D))&&(null===(l=null==r?void 0:r.getPreviousKeyword())||void 0===l?void 0:l.is(t.iv.Keyword,"order")))}},{id:t.fC.AfterOrderByFunction,name:t.fC.AfterOrderByFunction,resolve:function(e,n,r,o){var l,s;return Boolean((null==n?void 0:n.is(t.iv.Keyword,D))&&(null===(l=null==n?void 0:n.getPreviousKeyword())||void 0===l?void 0:l.is(t.iv.Keyword,"order"))&&(null==r?void 0:r.is(t.iv.Parenthesis))&&(null===(s=null==r?void 0:r.getPreviousNonWhiteSpaceToken())||void 0===s?void 0:s.is(t.iv.Function)))}},{id:t.fC.AfterOrderByDirection,name:t.fC.AfterOrderByDirection,resolve:function(e,n,r,o){return Boolean((null==n?void 0:n.is(t.iv.Keyword,L))||(null==n?void 0:n.is(t.iv.Keyword,M)))}},{id:t.fC.AfterIsOperator,name:t.fC.AfterIsOperator,resolve:function(e,n,r,o){return Boolean(null==r?void 0:r.is(t.iv.Operator,"IS"))}},{id:t.fC.AfterIsNotOperator,name:t.fC.AfterIsNotOperator,resolve:function(e,n,r,o){var l;return Boolean((null==r?void 0:r.is(t.iv.Operator,"NOT"))&&(null===(l=r.getPreviousNonWhiteSpaceToken())||void 0===l?void 0:l.is(t.iv.Operator,"IS")))}}]}var Z={logger:function(){}},ee=function(){};d.attachDebugger&&d.createLogger&&(Z=d.createLogger("SQLEditor"),ee=Z.logger,d.attachDebugger("sqleditor",void 0,Z));var te=[{id:"$__timeFilter(dateColumn)",name:"$__timeFilter(dateColumn)",text:"$__timeFilter",args:["column"],type:t.MacroType.Filter,description:"Will be replaced by a time range filter using the specified column name. For example, dateColumn BETWEEN FROM_UNIXTIME(1494410783) AND FROM_UNIXTIME(1494410983)"},{id:"$__timeFrom()",name:"$__timeFrom()",text:"$__timeFrom",args:[],type:t.MacroType.Filter,description:"Will be replaced by the start of the currently active time selection. For example, FROM_UNIXTIME(1494410783)"},{id:"$__timeTo()",name:"$__timeTo()",text:"$__timeTo",args:[],type:t.MacroType.Filter,description:"Will be replaced by the end of the currently active time selection. For example, FROM_UNIXTIME(1494410983)"},{id:"$__timeGroup(dateColumn, '5m')",name:"$__timeGroup(dateColumn, '5m')",text:"$__timeGroup",args:["column","'5m'"],type:t.MacroType.Value,description:"Will be replaced by an expression usable in GROUP BY clause. For example, *cast(cast(UNIX_TIMESTAMP(dateColumn)/(300) as signed)*300 as signed),*"},{id:"$__table",name:"$__table",text:"$__table",args:[],type:t.MacroType.Table,description:"Will be replaced by the query table."},{id:"$__column",name:"$__column",text:"$__column",args:[],type:t.MacroType.Column,description:"Will be replaced by the query column."}];function ne(e,n){var r,o,l,s={triggerCharacters:["."," ","$",",","(","'"]};(null==n?void 0:n.builtinFunctions.length)&&(s.supportedFunctions=function(){return n.builtinFunctions.map((function(e){return{id:e,name:e}}))});var a=[];return(null===(r=null==n?void 0:n.comparisonOperators)||void 0===r?void 0:r.length)&&a.push.apply(a,O([],T(n.comparisonOperators.map((function(e){return{id:e.toLocaleLowerCase(),operator:e,type:t.$M.Comparison}}))),!1)),n.logicalOperators=null!==(o=n.logicalOperators)&&void 0!==o?o:n.operators,(null===(l=null==n?void 0:n.logicalOperators)||void 0===l?void 0:l.length)&&a.push.apply(a,O([],T(n.logicalOperators.map((function(e){return{id:e.toLocaleLowerCase(),operator:e,type:t.$M.Logical}}))),!1)),s.supportedOperators=function(){return a},s.supportedMacros=function(){return te},s}var re={id:"standardSql",extensions:[".sql"],aliases:["sql"],mimetypes:[],loader:function(){return Promise.resolve().then((function(){return K}))},completionProvider:ne},oe=new Map,le=new Map,se=function(e,n,r){return h(void 0,void 0,void 0,(function(){var o,l,s,a,i,u,f,c;return q(this,(function(d){switch(d.label){case 0:return[4,(o=function(e,t){if("sql"!==(null==t?void 0:t.id)&&!t.loader){ee("Loading language '".concat(null==t?void 0:t.id,"' from Monaco registry"),!1);var n=e.languages.getLanguages().find((function(e){return e.id===(null==t?void 0:t.id)}));if(!n)throw Error("Unknown Monaco language ".concat(null==t?void 0:t.id));return E(E({completionProvider:ne},n),t)}return E(E({},re),t)}(e,n)).loader(e)];case 1:return l=d.sent(),s=l.language,a=l.conf,e.languages.register({id:r}),e.languages.setMonarchTokensProvider(r,E({},s)),e.languages.setLanguageConfiguration(r,E({},a)),o.formatter&&e.languages.registerDocumentFormattingEditProvider(r,{provideDocumentFormattingEdits:function(e){var t=n.formatter(e.getValue());return[{range:e.getFullModelRange(),text:t}]}}),o.completionProvider&&(i=o.completionProvider(e,s),function(e,n,r){var o,l,s,a,i,u,f,c,d,p,g,b=this;oe.has(e)||function(e){oe.has(e)||oe.set(e,{functions:new y.Registry,operators:new y.Registry,suggestionKinds:new y.Registry(S),positionResolvers:new y.Registry(z),macros:new y.Registry}),oe.get(e)}(e);var w,R,A,C=oe.get(e);le.has(n)||le.set(n,new y.Registry((w=C.functions,R=C.operators,A=C.macros,function(){return[{id:t.is.SelectKeyword,name:t.is.SelectKeyword,suggestions:function(e,n){return Promise.resolve([{label:"SELECT <column>",insertText:"SELECT $0",insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Snippet,command:j,sortText:t.G8.Medium},{label:"SELECT <column> FROM <table>",insertText:"SELECT $2 FROM $1",insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Snippet,command:j,sortText:t.G8.Medium}])}},{id:t.is.TemplateVariables,name:t.is.TemplateVariables,suggestions:function(e,n){var r=m.getTemplateSrv();return r?Promise.resolve(r.getVariables().map((function(e){var n="$".concat(e.name),o=r.replace(n);return{label:n,detail:"(Template Variable) ".concat(o),kind:t.cm.Snippet,documentation:"(Template Variable) ".concat(o),insertText:"\\$".concat(e.name," "),insertTextRules:t.a7.InsertAsSnippet,command:j,sortText:t.G8.Low}}))):Promise.resolve([])}},{id:t.is.SelectMacro,name:t.is.SelectMacro,suggestions:function(e,n){return Promise.resolve(O([],T(A.list().filter((function(e){return e.type===t.MacroType.Value||e.type===t.MacroType.Column})).map(X)),!1))}},{id:t.is.TableMacro,name:t.is.TableMacro,suggestions:function(e,n){return Promise.resolve(O([],T(A.list().filter((function(e){return e.type===t.MacroType.Table})).map(X)),!1))}},{id:t.is.GroupMacro,name:t.is.GroupMacro,suggestions:function(e,n){return Promise.resolve(O([],T(A.list().filter((function(e){return e.type===t.MacroType.Group})).map(X)),!1))}},{id:t.is.FilterMacro,name:t.is.FilterMacro,suggestions:function(e,n){return Promise.resolve(O([],T(A.list().filter((function(e){return e.type===t.MacroType.Filter})).map(X)),!1))}},{id:t.is.WithKeyword,name:t.is.WithKeyword,suggestions:function(e,n){return Promise.resolve([{label:"WITH <alias> AS ( ... )",insertText:"WITH $1  AS ( $2 )",insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Snippet,command:j,sortText:t.G8.Medium}])}},{id:t.is.StarWildCard,name:t.is.StarWildCard,suggestions:function(e,n){return Promise.resolve([{label:"*",insertText:"* $0",insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Field,command:j,sortText:t.G8.High}])}},{id:t.is.FunctionsWithArguments,name:t.is.FunctionsWithArguments,suggestions:function(e,n){return Promise.resolve(O([],T(w.list().map((function(e){return{label:e.name,insertText:"".concat(e.name,"($0)"),documentation:e.description,insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Function,command:j,sortText:t.G8.MediumLow}}))),!1))}},{id:t.is.FunctionsWithoutArguments,name:t.is.FunctionsWithoutArguments,suggestions:function(e,n){return Promise.resolve(O([],T(w.list().map((function(e){return{label:e.name,insertText:"".concat(e.name,"()"),documentation:e.description,insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Function,command:j,sortText:t.G8.MediumHigh}}))),!1))}},{id:t.is.FromKeyword,name:t.is.FromKeyword,suggestions:function(e,n){return Promise.resolve([{label:"FROM",insertText:"FROM $0",command:j,insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Keyword}])}},{id:t.is.Schemas,name:t.is.Schemas,suggestions:function(e,t){return Promise.resolve([])}},{id:t.is.Tables,name:t.is.Tables,suggestions:function(e,t){return Promise.resolve([])}},{id:t.is.Columns,name:t.is.Columns,suggestions:function(e,t){return Promise.resolve([])}},{id:t.is.LogicalOperators,name:t.is.LogicalOperators,suggestions:function(e,n){return Promise.resolve(R.list().filter((function(e){return e.type===t.$M.Logical})).map((function(e){return{label:e.operator,insertText:"".concat(e.operator," "),documentation:e.description,command:j,sortText:t.G8.MediumHigh,kind:t.cm.Operator}})))}},{id:t.is.WhereKeyword,name:t.is.WhereKeyword,suggestions:function(e,n){return Promise.resolve([{label:"WHERE",insertText:"WHERE ",command:j,sortText:t.G8.MediumHigh,kind:t.cm.Keyword}])}},{id:t.is.ComparisonOperators,name:t.is.ComparisonOperators,suggestions:function(e,n){return Promise.resolve(O(O([],T(R.list().filter((function(e){return e.type===t.$M.Comparison})).map((function(e){return{label:e.operator,insertText:"".concat(e.operator," "),documentation:e.description,command:j,sortText:t.G8.MediumHigh,kind:t.cm.Operator}}))),!1),[{label:"IN (...)",insertText:"IN ( $0 )",command:j,sortText:t.G8.Medium,kind:t.cm.Operator,insertTextRules:t.a7.InsertAsSnippet},{label:"NOT IN (...)",insertText:"NOT IN ( $0 )",command:j,sortText:t.G8.Medium,kind:t.cm.Operator,insertTextRules:t.a7.InsertAsSnippet},{label:"IS",insertText:"IS",command:j,sortText:t.G8.Medium,kind:t.cm.Operator},{label:"IS NOT",insertText:"IS NOT",command:j,sortText:t.G8.Medium,kind:t.cm.Operator}],!1))}},{id:t.is.GroupByKeywords,name:t.is.GroupByKeywords,suggestions:function(e,n){return Promise.resolve([{label:"GROUP BY",insertText:"GROUP BY ",command:j,sortText:t.G8.MediumHigh,kind:t.cm.Keyword}])}},{id:t.is.OrderByKeywords,name:t.is.OrderByKeywords,suggestions:function(e,n){return Promise.resolve([{label:"ORDER BY",insertText:"ORDER BY ",command:j,sortText:t.G8.Medium,kind:t.cm.Keyword},{label:"ORDER BY(ascending)",insertText:"ORDER BY $1 ASC ",command:j,sortText:t.G8.MediumLow,kind:t.cm.Snippet,insertTextRules:t.a7.InsertAsSnippet},{label:"ORDER BY(descending)",insertText:"ORDER BY $1 DESC",command:j,sortText:t.G8.MediumLow,kind:t.cm.Snippet,insertTextRules:t.a7.InsertAsSnippet}])}},{id:t.is.LimitKeyword,name:t.is.LimitKeyword,suggestions:function(e,n){return Promise.resolve([{label:"LIMIT",insertText:"LIMIT ",command:j,sortText:t.G8.MediumLow,kind:t.cm.Keyword}])}},{id:t.is.SortOrderDirectionKeyword,name:t.is.SortOrderDirectionKeyword,suggestions:function(e,n){return Promise.resolve([M,L].map((function(e){return{label:e,insertText:"".concat(e," "),command:j,kind:t.cm.Keyword}})))}},{id:t.is.NotKeyword,name:t.is.NotKeyword,suggestions:function(){return Promise.resolve([{label:"NOT",insertText:"NOT",command:j,kind:t.cm.Keyword,sortText:t.G8.High}])}},{id:t.is.BoolValues,name:t.is.BoolValues,suggestions:function(){return Promise.resolve(["TRUE","FALSE"].map((function(e){return{label:e,insertText:"".concat(e),command:j,kind:t.cm.Keyword,sortText:t.G8.Medium}})))}},{id:t.is.NullValue,name:t.is.NullValue,suggestions:function(){return Promise.resolve(["NULL"].map((function(e){return{label:e,insertText:"".concat(e),command:j,kind:t.cm.Keyword,sortText:t.G8.Low}})))}}]})));var I=le.get(n);if(r.supportedFunctions)try{for(var N=v(r.supportedFunctions()),P=N.next();!P.done;P=N.next()){var D=P.value;C.functions.getIfExists(D.id)||C.functions.register(D)}}catch(e){o={error:e}}finally{try{P&&!P.done&&(l=N.return)&&l.call(N)}finally{if(o)throw o.error}}if(r.supportedOperators)try{for(var _=v(r.supportedOperators()),k=_.next();!k.done;k=_.next()){var F=k.value;C.operators.getIfExists(F.id)||C.operators.register(E(E({},F),{name:F.id}))}}catch(e){s={error:e}}finally{try{k&&!k.done&&(a=_.return)&&a.call(_)}finally{if(s)throw s.error}}if(r.supportedMacros)try{for(var x=v(r.supportedMacros()),K=x.next();!K.done;K=x.next()){var G=K.value;C.macros.getIfExists(G.id)||C.macros.register(E(E({},G),{name:G.id}))}}catch(e){i={error:e}}finally{try{K&&!K.done&&(u=x.return)&&u.call(x)}finally{if(i)throw i.error}}if(r.customStatementPlacement){var W=function(e){var t=C.positionResolvers.getIfExists(e.id);if(t){var n=t.resolve;t.resolve=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=e.resolve.apply(e,O([],T(t),!1));if(e.overrideDefault)return o;var l=n.apply(void 0,O([],T(t),!1));return l||o}}else C.positionResolvers.register(E(E({},e),{id:e.id,name:e.id})),C.suggestionKinds.register({id:e.id,name:e.id,kind:[]})};try{for(var Y=v(r.customStatementPlacement()),V=Y.next();!V.done;V=Y.next())W(V.value)}catch(e){f={error:e}}finally{try{V&&!V.done&&(c=Y.return)&&c.call(Y)}finally{if(f)throw f.error}}}if(r.customSuggestionKinds){var H=function(e){if(null===(g=e.applyTo)||void 0===g||g.forEach((function(t){var n=C.suggestionKinds.getIfExists(t);n&&-1===n.kind.indexOf(e.id)&&n.kind.push(e.id)})),e.overrideDefault){var t=I.get(e.id);if(void 0!==t)return t.suggestions=e.suggestionsResolver,"continue"}I.register({id:e.id,name:e.id,suggestions:e.suggestionsResolver})};try{for(var $=v(r.customSuggestionKinds()),Q=$.next();!Q.done;Q=$.next())H(Q.value)}catch(e){d={error:e}}finally{try{Q&&!Q.done&&(p=$.return)&&p.call($)}finally{if(d)throw d.error}}}if(r.schemas){var J=(ee=I.get(t.is.Schemas)).suggestions;ee.suggestions=function(e,n){return h(b,void 0,void 0,(function(){var o,l,s;return q(this,(function(a){switch(a.label){case 0:return[4,J(e,n)];case 1:return o=a.sent(),[4,r.schemas.resolve()];case 2:return l=a.sent(),s=l.map((function(e){var n;return{label:e.name,insertText:"".concat(null!==(n=e.completion)&&void 0!==n?n:e.name,"."),command:j,kind:t.cm.Module,sortText:t.G8.High}})),[2,O(O([],T(o),!1),T(s),!1)]}}))}))}}if(r.tables){var Z=(ee=I.get(t.is.Tables)).suggestions;ee.suggestions=function(e,n){return h(b,void 0,void 0,(function(){var o,l,s,a,i,u,f;return q(this,(function(c){switch(c.label){case 0:return[4,Z(e,n)];case 1:return o=c.sent(),l=U(e.currentToken),s=null!==(f=null===(u=r.tables)||void 0===u?void 0:u.parseName)&&void 0!==f?f:B,a=s(l),[4,r.tables.resolve(a)];case 2:return i=c.sent().map((function(e){var n;return{label:e.name,insertText:"".concat(null!==(n=e.completion)&&void 0!==n?n:e.name).concat(e.completion===e.name?" $0":""),insertTextRules:t.a7.InsertAsSnippet,command:j,kind:t.cm.Field,sortText:t.G8.MediumHigh}})),[2,O(O([],T(o),!1),T(i),!1)]}}))}))}}if(r.columns){var ee,te=(ee=I.get(t.is.Columns)).suggestions;ee.suggestions=function(e,n){return h(b,void 0,void 0,(function(){var o,l,s,a,i,u,f,c,d;return q(this,(function(p){switch(p.label){case 0:return[4,te(e,n)];case 1:return o=p.sent(),l=U(e.currentToken),a=null!==(c=null===(f=r.tables)||void 0===f?void 0:f.parseName)&&void 0!==c?c:B,l&&l.value&&(s=a(l)),i=[],s?[4,null===(d=r.columns)||void 0===d?void 0:d.resolve(s)]:[3,3];case 2:u=p.sent(),i=u?u.map((function(e){var n;return{label:e.name,insertText:null!==(n=e.completion)&&void 0!==n?n:e.name,kind:t.cm.Field,sortText:t.G8.High,detail:e.type,documentation:e.description}})):[],p.label=3;case 3:return[2,O(O([],T(o),!1),T(i),!1)]}}))}))}}}(n.id,r,i),u=oe.get(n.id),f=le.get(r),c=function(t,n,o,l){return h(void 0,void 0,void 0,(function(){var o,l,s,a;return q(this,(function(i){switch(i.label){case 0:return o=C(e,t,n,r),l=b(o,u.positionResolvers),s=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=t.getIfExists(e[r]);o&&(n=n.concat(o.kind))}return n}(l,u.suggestionKinds),ee("Statement position",!1,l),ee("Suggestion kinds",!1,s),a={position:n,currentToken:o,statementPosition:l,kind:s,range:e.Range.fromPositions(n)},[4,w(e,o,s,a,f)];case 1:return[2,{suggestions:i.sent()}]}}))}))},e.languages.registerCompletionItemProvider(r,E(E({},i),{provideCompletionItems:c}))),[2]}}))}))};Object.freeze({__proto__:null,singleLineFullQuery:{query:'SELECT column1, FROM table1 WHERE column1 = "value1" GROUP BY column1 ORDER BY column1 DESC LIMIT 10',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"identifier.sql",language:"sql"},{offset:14,type:"delimiter.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"},{offset:16,type:"keyword.sql",language:"sql"},{offset:20,type:"white.sql",language:"sql"},{offset:21,type:"identifier.sql",language:"sql"},{offset:27,type:"white.sql",language:"sql"},{offset:28,type:"keyword.sql",language:"sql"},{offset:33,type:"white.sql",language:"sql"},{offset:34,type:"identifier.sql",language:"sql"},{offset:41,type:"white.sql",language:"sql"},{offset:42,type:"operator.sql",language:"sql"},{offset:43,type:"white.sql",language:"sql"},{offset:44,type:"identifier.quote.sql",language:"sql"},{offset:45,type:"identifier.sql",language:"sql"},{offset:51,type:"identifier.quote.sql",language:"sql"},{offset:52,type:"white.sql",language:"sql"},{offset:53,type:"keyword.sql",language:"sql"},{offset:58,type:"white.sql",language:"sql"},{offset:59,type:"keyword.sql",language:"sql"},{offset:61,type:"white.sql",language:"sql"},{offset:62,type:"identifier.sql",language:"sql"},{offset:69,type:"white.sql",language:"sql"},{offset:70,type:"keyword.sql",language:"sql"},{offset:75,type:"white.sql",language:"sql"},{offset:76,type:"keyword.sql",language:"sql"},{offset:78,type:"white.sql",language:"sql"},{offset:79,type:"identifier.sql",language:"sql"},{offset:86,type:"white.sql",language:"sql"},{offset:87,type:"keyword.sql",language:"sql"},{offset:91,type:"white.sql",language:"sql"},{offset:92,type:"keyword.sql",language:"sql"},{offset:97,type:"white.sql",language:"sql"},{offset:98,type:"number.sql",language:"sql"},{offset:100,type:"delimiter.sql",language:"sql"}]]},singleLineFullQueryWithAggregation:{query:'SELECT count(column1), FROM table1 WHERE column1 = "value1" GROUP BY column1 ORDER BY column1 DESC LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"predefined.sql",language:"sql"},{offset:12,type:"delimiter.parenthesis.sql",language:"sql"},{offset:13,type:"identifier.sql",language:"sql"},{offset:20,type:"delimiter.parenthesis.sql",language:"sql"},{offset:21,type:"delimiter.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"keyword.sql",language:"sql"},{offset:27,type:"white.sql",language:"sql"},{offset:28,type:"identifier.sql",language:"sql"},{offset:34,type:"white.sql",language:"sql"},{offset:35,type:"keyword.sql",language:"sql"},{offset:40,type:"white.sql",language:"sql"},{offset:41,type:"identifier.sql",language:"sql"},{offset:48,type:"white.sql",language:"sql"},{offset:49,type:"operator.sql",language:"sql"},{offset:50,type:"white.sql",language:"sql"},{offset:51,type:"identifier.quote.sql",language:"sql"},{offset:52,type:"identifier.sql",language:"sql"},{offset:58,type:"identifier.quote.sql",language:"sql"},{offset:59,type:"white.sql",language:"sql"},{offset:60,type:"keyword.sql",language:"sql"},{offset:65,type:"white.sql",language:"sql"},{offset:66,type:"keyword.sql",language:"sql"},{offset:68,type:"white.sql",language:"sql"},{offset:69,type:"identifier.sql",language:"sql"},{offset:76,type:"white.sql",language:"sql"},{offset:77,type:"keyword.sql",language:"sql"},{offset:82,type:"white.sql",language:"sql"},{offset:83,type:"keyword.sql",language:"sql"},{offset:85,type:"white.sql",language:"sql"},{offset:86,type:"identifier.sql",language:"sql"},{offset:93,type:"white.sql",language:"sql"},{offset:94,type:"keyword.sql",language:"sql"},{offset:98,type:"white.sql",language:"sql"},{offset:99,type:"keyword.sql",language:"sql"},{offset:104,type:"white.sql",language:"sql"},{offset:105,type:"number.sql",language:"sql"},{offset:107,type:"delimiter.sql",language:"sql"}]]},multiLineFullQuery:{query:'SELECT column1,  \n  FROM table1 \n  \n  WHERE column1 = "value1" \n  GROUP BY column1 ORDER BY column1 DESC \n  LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"identifier.sql",language:"sql"},{offset:14,type:"delimiter.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:4,type:"white.sql",language:"sql"},{offset:5,type:"identifier.sql",language:"sql"},{offset:11,type:"white.sql",language:"sql"}],[{offset:0,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"identifier.sql",language:"sql"},{offset:13,type:"white.sql",language:"sql"},{offset:14,type:"operator.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"},{offset:16,type:"identifier.quote.sql",language:"sql"},{offset:17,type:"identifier.sql",language:"sql"},{offset:23,type:"identifier.quote.sql",language:"sql"},{offset:24,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"keyword.sql",language:"sql"},{offset:8,type:"white.sql",language:"sql"},{offset:9,type:"identifier.sql",language:"sql"},{offset:16,type:"white.sql",language:"sql"},{offset:17,type:"keyword.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"keyword.sql",language:"sql"},{offset:25,type:"white.sql",language:"sql"},{offset:26,type:"identifier.sql",language:"sql"},{offset:33,type:"white.sql",language:"sql"},{offset:34,type:"keyword.sql",language:"sql"},{offset:38,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"number.sql",language:"sql"},{offset:8,type:"delimiter.sql",language:"sql"}]]},multiLineFullQueryWithAggregation:{query:'SELECT count(column1),  \n  FROM table1 \n  \n  WHERE column1 = "value1" \n  GROUP BY column1 ORDER BY column1 DESC \n  LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"predefined.sql",language:"sql"},{offset:12,type:"delimiter.parenthesis.sql",language:"sql"},{offset:13,type:"identifier.sql",language:"sql"},{offset:20,type:"delimiter.parenthesis.sql",language:"sql"},{offset:21,type:"delimiter.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:4,type:"white.sql",language:"sql"},{offset:5,type:"identifier.sql",language:"sql"},{offset:11,type:"white.sql",language:"sql"}],[{offset:0,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"identifier.sql",language:"sql"},{offset:13,type:"white.sql",language:"sql"},{offset:14,type:"operator.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"},{offset:16,type:"identifier.quote.sql",language:"sql"},{offset:17,type:"identifier.sql",language:"sql"},{offset:23,type:"identifier.quote.sql",language:"sql"},{offset:24,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"keyword.sql",language:"sql"},{offset:8,type:"white.sql",language:"sql"},{offset:9,type:"identifier.sql",language:"sql"},{offset:16,type:"white.sql",language:"sql"},{offset:17,type:"keyword.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"keyword.sql",language:"sql"},{offset:25,type:"white.sql",language:"sql"},{offset:26,type:"identifier.sql",language:"sql"},{offset:33,type:"white.sql",language:"sql"},{offset:34,type:"keyword.sql",language:"sql"},{offset:38,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"number.sql",language:"sql"},{offset:8,type:"delimiter.sql",language:"sql"}]]},singleLineEmptyQuery:{query:"",tokens:[]},singleLineTwoQueries:{query:'SELECT column1, FROM table1 WHERE column1 = "value1" GROUP BY column1 ORDER BY column1 DESC LIMIT 10; SELECT column2, FROM table2 WHERE column2 = "value2" GROUP BY column1 ORDER BY column2 DESC LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"identifier.sql",language:"sql"},{offset:14,type:"delimiter.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"},{offset:16,type:"keyword.sql",language:"sql"},{offset:20,type:"white.sql",language:"sql"},{offset:21,type:"identifier.sql",language:"sql"},{offset:27,type:"white.sql",language:"sql"},{offset:28,type:"keyword.sql",language:"sql"},{offset:33,type:"white.sql",language:"sql"},{offset:34,type:"identifier.sql",language:"sql"},{offset:41,type:"white.sql",language:"sql"},{offset:42,type:"operator.sql",language:"sql"},{offset:43,type:"white.sql",language:"sql"},{offset:44,type:"identifier.quote.sql",language:"sql"},{offset:45,type:"identifier.sql",language:"sql"},{offset:51,type:"identifier.quote.sql",language:"sql"},{offset:52,type:"white.sql",language:"sql"},{offset:53,type:"keyword.sql",language:"sql"},{offset:58,type:"white.sql",language:"sql"},{offset:59,type:"keyword.sql",language:"sql"},{offset:61,type:"white.sql",language:"sql"},{offset:62,type:"identifier.sql",language:"sql"},{offset:69,type:"white.sql",language:"sql"},{offset:70,type:"keyword.sql",language:"sql"},{offset:75,type:"white.sql",language:"sql"},{offset:76,type:"keyword.sql",language:"sql"},{offset:78,type:"white.sql",language:"sql"},{offset:79,type:"identifier.sql",language:"sql"},{offset:86,type:"white.sql",language:"sql"},{offset:87,type:"keyword.sql",language:"sql"},{offset:91,type:"white.sql",language:"sql"},{offset:92,type:"keyword.sql",language:"sql"},{offset:97,type:"white.sql",language:"sql"},{offset:98,type:"number.sql",language:"sql"},{offset:100,type:"delimiter.sql",language:"sql"},{offset:101,type:"white.sql",language:"sql"},{offset:102,type:"keyword.sql",language:"sql"},{offset:108,type:"white.sql",language:"sql"},{offset:109,type:"identifier.sql",language:"sql"},{offset:116,type:"delimiter.sql",language:"sql"},{offset:117,type:"white.sql",language:"sql"},{offset:118,type:"keyword.sql",language:"sql"},{offset:122,type:"white.sql",language:"sql"},{offset:123,type:"identifier.sql",language:"sql"},{offset:129,type:"white.sql",language:"sql"},{offset:130,type:"keyword.sql",language:"sql"},{offset:135,type:"white.sql",language:"sql"},{offset:136,type:"identifier.sql",language:"sql"},{offset:143,type:"white.sql",language:"sql"},{offset:144,type:"operator.sql",language:"sql"},{offset:145,type:"white.sql",language:"sql"},{offset:146,type:"identifier.quote.sql",language:"sql"},{offset:147,type:"identifier.sql",language:"sql"},{offset:153,type:"identifier.quote.sql",language:"sql"},{offset:154,type:"white.sql",language:"sql"},{offset:155,type:"keyword.sql",language:"sql"},{offset:160,type:"white.sql",language:"sql"},{offset:161,type:"keyword.sql",language:"sql"},{offset:163,type:"white.sql",language:"sql"},{offset:164,type:"identifier.sql",language:"sql"},{offset:171,type:"white.sql",language:"sql"},{offset:172,type:"keyword.sql",language:"sql"},{offset:177,type:"white.sql",language:"sql"},{offset:178,type:"keyword.sql",language:"sql"},{offset:180,type:"white.sql",language:"sql"},{offset:181,type:"identifier.sql",language:"sql"},{offset:188,type:"white.sql",language:"sql"},{offset:189,type:"keyword.sql",language:"sql"},{offset:193,type:"white.sql",language:"sql"},{offset:194,type:"keyword.sql",language:"sql"},{offset:199,type:"white.sql",language:"sql"},{offset:200,type:"number.sql",language:"sql"},{offset:202,type:"delimiter.sql",language:"sql"}]]},singleLineTwoQueriesWithAggregation:{query:'SELECT count(column1), FROM table1 WHERE column1 = "value1" GROUP BY column1 ORDER BY column1 DESC LIMIT 10; SELECT count(column2), FROM table2 WHERE column2 = "value2" GROUP BY column1 ORDER BY column2 DESC LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"predefined.sql",language:"sql"},{offset:12,type:"delimiter.parenthesis.sql",language:"sql"},{offset:13,type:"identifier.sql",language:"sql"},{offset:20,type:"delimiter.parenthesis.sql",language:"sql"},{offset:21,type:"delimiter.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"keyword.sql",language:"sql"},{offset:27,type:"white.sql",language:"sql"},{offset:28,type:"identifier.sql",language:"sql"},{offset:34,type:"white.sql",language:"sql"},{offset:35,type:"keyword.sql",language:"sql"},{offset:40,type:"white.sql",language:"sql"},{offset:41,type:"identifier.sql",language:"sql"},{offset:48,type:"white.sql",language:"sql"},{offset:49,type:"operator.sql",language:"sql"},{offset:50,type:"white.sql",language:"sql"},{offset:51,type:"identifier.quote.sql",language:"sql"},{offset:52,type:"identifier.sql",language:"sql"},{offset:58,type:"identifier.quote.sql",language:"sql"},{offset:59,type:"white.sql",language:"sql"},{offset:60,type:"keyword.sql",language:"sql"},{offset:65,type:"white.sql",language:"sql"},{offset:66,type:"keyword.sql",language:"sql"},{offset:68,type:"white.sql",language:"sql"},{offset:69,type:"identifier.sql",language:"sql"},{offset:76,type:"white.sql",language:"sql"},{offset:77,type:"keyword.sql",language:"sql"},{offset:82,type:"white.sql",language:"sql"},{offset:83,type:"keyword.sql",language:"sql"},{offset:85,type:"white.sql",language:"sql"},{offset:86,type:"identifier.sql",language:"sql"},{offset:93,type:"white.sql",language:"sql"},{offset:94,type:"keyword.sql",language:"sql"},{offset:98,type:"white.sql",language:"sql"},{offset:99,type:"keyword.sql",language:"sql"},{offset:104,type:"white.sql",language:"sql"},{offset:105,type:"number.sql",language:"sql"},{offset:107,type:"delimiter.sql",language:"sql"},{offset:108,type:"white.sql",language:"sql"},{offset:109,type:"keyword.sql",language:"sql"},{offset:115,type:"white.sql",language:"sql"},{offset:116,type:"predefined.sql",language:"sql"},{offset:121,type:"delimiter.parenthesis.sql",language:"sql"},{offset:122,type:"identifier.sql",language:"sql"},{offset:129,type:"delimiter.parenthesis.sql",language:"sql"},{offset:130,type:"delimiter.sql",language:"sql"},{offset:131,type:"white.sql",language:"sql"},{offset:132,type:"keyword.sql",language:"sql"},{offset:136,type:"white.sql",language:"sql"},{offset:137,type:"identifier.sql",language:"sql"},{offset:143,type:"white.sql",language:"sql"},{offset:144,type:"keyword.sql",language:"sql"},{offset:149,type:"white.sql",language:"sql"},{offset:150,type:"identifier.sql",language:"sql"},{offset:157,type:"white.sql",language:"sql"},{offset:158,type:"operator.sql",language:"sql"},{offset:159,type:"white.sql",language:"sql"},{offset:160,type:"identifier.quote.sql",language:"sql"},{offset:161,type:"identifier.sql",language:"sql"},{offset:167,type:"identifier.quote.sql",language:"sql"},{offset:168,type:"white.sql",language:"sql"},{offset:169,type:"keyword.sql",language:"sql"},{offset:174,type:"white.sql",language:"sql"},{offset:175,type:"keyword.sql",language:"sql"},{offset:177,type:"white.sql",language:"sql"},{offset:178,type:"identifier.sql",language:"sql"},{offset:185,type:"white.sql",language:"sql"},{offset:186,type:"keyword.sql",language:"sql"},{offset:191,type:"white.sql",language:"sql"},{offset:192,type:"keyword.sql",language:"sql"},{offset:194,type:"white.sql",language:"sql"},{offset:195,type:"identifier.sql",language:"sql"},{offset:202,type:"white.sql",language:"sql"},{offset:203,type:"keyword.sql",language:"sql"},{offset:207,type:"white.sql",language:"sql"},{offset:208,type:"keyword.sql",language:"sql"},{offset:213,type:"white.sql",language:"sql"},{offset:214,type:"number.sql",language:"sql"},{offset:216,type:"delimiter.sql",language:"sql"}]]},singleLineMultipleColumns:{query:'SELECT count(column1), column2 FROM table1 WHERE column1 = "value1" GROUP BY column1 ORDER BY column1, avg(column2) DESC LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"predefined.sql",language:"sql"},{offset:12,type:"delimiter.parenthesis.sql",language:"sql"},{offset:13,type:"identifier.sql",language:"sql"},{offset:20,type:"delimiter.parenthesis.sql",language:"sql"},{offset:21,type:"delimiter.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"identifier.sql",language:"sql"},{offset:30,type:"white.sql",language:"sql"},{offset:31,type:"keyword.sql",language:"sql"},{offset:35,type:"white.sql",language:"sql"},{offset:36,type:"identifier.sql",language:"sql"},{offset:42,type:"white.sql",language:"sql"},{offset:43,type:"keyword.sql",language:"sql"},{offset:48,type:"white.sql",language:"sql"},{offset:49,type:"identifier.sql",language:"sql"},{offset:56,type:"white.sql",language:"sql"},{offset:57,type:"operator.sql",language:"sql"},{offset:58,type:"white.sql",language:"sql"},{offset:59,type:"identifier.quote.sql",language:"sql"},{offset:60,type:"identifier.sql",language:"sql"},{offset:66,type:"identifier.quote.sql",language:"sql"},{offset:67,type:"white.sql",language:"sql"},{offset:68,type:"keyword.sql",language:"sql"},{offset:73,type:"white.sql",language:"sql"},{offset:74,type:"keyword.sql",language:"sql"},{offset:76,type:"white.sql",language:"sql"},{offset:77,type:"identifier.sql",language:"sql"},{offset:84,type:"white.sql",language:"sql"},{offset:85,type:"keyword.sql",language:"sql"},{offset:90,type:"white.sql",language:"sql"},{offset:91,type:"keyword.sql",language:"sql"},{offset:93,type:"white.sql",language:"sql"},{offset:94,type:"identifier.sql",language:"sql"},{offset:101,type:"delimiter.sql",language:"sql"},{offset:102,type:"white.sql",language:"sql"},{offset:103,type:"predefined.sql",language:"sql"},{offset:106,type:"delimiter.parenthesis.sql",language:"sql"},{offset:107,type:"identifier.sql",language:"sql"},{offset:114,type:"delimiter.parenthesis.sql",language:"sql"},{offset:115,type:"white.sql",language:"sql"},{offset:116,type:"keyword.sql",language:"sql"},{offset:120,type:"white.sql",language:"sql"},{offset:121,type:"keyword.sql",language:"sql"},{offset:126,type:"white.sql",language:"sql"},{offset:127,type:"number.sql",language:"sql"},{offset:129,type:"delimiter.sql",language:"sql"}]]},multiLineMultipleColumns:{query:'SELECT count(column1), column2 \n  FROM table1 \n  \n  WHERE column1 = "value1" \n  GROUP BY column1 ORDER BY column1, avg(column2) DESC \n  LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"predefined.sql",language:"sql"},{offset:12,type:"delimiter.parenthesis.sql",language:"sql"},{offset:13,type:"identifier.sql",language:"sql"},{offset:20,type:"delimiter.parenthesis.sql",language:"sql"},{offset:21,type:"delimiter.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"identifier.sql",language:"sql"},{offset:30,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:4,type:"white.sql",language:"sql"},{offset:5,type:"identifier.sql",language:"sql"},{offset:11,type:"white.sql",language:"sql"}],[{offset:0,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"identifier.sql",language:"sql"},{offset:13,type:"white.sql",language:"sql"},{offset:14,type:"operator.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"},{offset:16,type:"identifier.quote.sql",language:"sql"},{offset:17,type:"identifier.sql",language:"sql"},{offset:23,type:"identifier.quote.sql",language:"sql"},{offset:24,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"keyword.sql",language:"sql"},{offset:8,type:"white.sql",language:"sql"},{offset:9,type:"identifier.sql",language:"sql"},{offset:16,type:"white.sql",language:"sql"},{offset:17,type:"keyword.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"keyword.sql",language:"sql"},{offset:25,type:"white.sql",language:"sql"},{offset:26,type:"identifier.sql",language:"sql"},{offset:33,type:"delimiter.sql",language:"sql"},{offset:34,type:"white.sql",language:"sql"},{offset:35,type:"predefined.sql",language:"sql"},{offset:38,type:"delimiter.parenthesis.sql",language:"sql"},{offset:39,type:"identifier.sql",language:"sql"},{offset:46,type:"delimiter.parenthesis.sql",language:"sql"},{offset:47,type:"white.sql",language:"sql"},{offset:48,type:"keyword.sql",language:"sql"},{offset:52,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"number.sql",language:"sql"},{offset:8,type:"delimiter.sql",language:"sql"}]]}});t.SQLEditor=function(e){var t=e.children,n=e.onBlur,r=e.onChange,o=e.query,l=e.language,s=void 0===l?{id:"sql"}:l,a=e.width,i=e.height,u=p.useRef(null),f=p.useRef(),c=p.useMemo((function(){var e=Q(),t="".concat(s.id,"-").concat(e);return f.current=t,t}),[s.id]);p.useEffect((function(){return function(){le.delete(f.current),ee("Removing instance cache ".concat(f.current),!1,le)}}),[]);var y=p.useCallback((function(){u.current&&u.current.getAction("editor.action.formatDocument").run()}),[]);return g.createElement("div",{style:{width:a}},g.createElement(d.CodeEditor,{height:i||"240px",width:a?"".concat(a-2,"px"):void 0,language:c,value:o,onBlur:function(e){r&&r(e,!1),n&&n()},showMiniMap:!1,showLineNumbers:!0,onEditorDidMount:function(e,t){u.current=e,e.onDidChangeModelContent((function(t){var n=e.getValue();r&&r(n,!1)})),e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.Enter,(function(){var t=e.getValue();r&&r(t,!0)})),e.onKeyUp((function(t){84===t.keyCode&&e.trigger(j.id,j.id,{})})),se(t,s,c)}}),t&&t({formatQuery:y}))},t.getStandardSQLCompletionProvider=ne,t.grafanaStandardSQLLanguage=x,t.grafanaStandardSQLLanguageConf=F},988:(e,t,n)=>{"use strict";e.exports=n(853)},305:t=>{"use strict";t.exports=e},545:e=>{"use strict";e.exports=o},388:e=>{"use strict";e.exports=n},980:e=>{"use strict";e.exports=r},650:e=>{"use strict";e.exports=t},177:e=>{"use strict";e.exports=l}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return s[e](n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};return(()=>{"use strict";i.r(u),i.d(u,{plugin:()=>Te});var e=i(305),t=i(650),n=i.n(t),r=i(569),o=i(388);const l=[{label:"Show databases",value:"SHOW DATABASES",description:"List databases available in your instance"},{label:"Show tables",value:"SHOW TABLES FROM $__database",description:"List tables in the selected database"},{label:"Describe table",value:"DESCRIBE $__database.$__table",description:"Describe the selected table"},{label:"Show measurements",value:"SHOW MEASURES FROM $__database.$__table",description:"List measurements in the selected table"},{label:"First 10 rows",value:"SELECT * FROM $__database.$__table LIMIT 10",description:"Select the first 10 rows of the selected table"}],s={AuthenticationProvider:{input:"Authentication Provider"},SecretKey:{input:"Secret Access Key"},AccessKey:{input:"Access Key ID"},DefaultRegion:{input:"Default Region"},defaultDatabase:{input:"Database",wrapper:"data-testid onloaddatabase"},defaultTable:{input:"Table",wrapper:"data-testid onloadtable"},defaultMeasure:{input:"Measure",wrapper:"data-testid onloadmeasure"}};var a=i(988);const f="$__table",c="$__database",d=[{id:"$__timeFilter",name:"$__timeFilter",text:"$__timeFilter",args:[],type:a.MacroType.Filter,description:"Will be replaced by an expression that limits the time to the dashboard range."},{id:"$__timeFrom",name:"$__timeFrom",text:"$__timeFrom",args:[],type:a.MacroType.Filter,description:"Will be replaced by the number in milliseconds at the start of the dashboard range"},{id:"$__timeTo",name:"$__timeTo",text:"$__timeTo",args:[],type:a.MacroType.Filter,description:"Will be replaced by the number in milliseconds at the end of the dashboard range."},{id:"$__interval_ms",name:"$__interval_ms",text:"$__interval_ms",args:[],type:a.MacroType.Filter,description:"Will be replaced by a number in time format that represents the amount of time a single pixel in the graph should cover."},{id:"$__interval_raw_ms",name:"$__interval_raw_ms",text:"$__interval_raw_ms",args:[],type:a.MacroType.Filter,description:"Will be replaced by the number in milliseconds that represents the amount of time a single pixel in the graph should cover."},{id:c,name:c,text:c,args:[],type:a.MacroType.Table,description:"Will be replaced by the query database."},{id:f,name:f,text:f,args:[],type:a.MacroType.Table,description:"Will be replaced by the query table."},{id:"$__measure",name:"$__measure",text:"$__measure",args:[],type:a.MacroType.Column,description:"Will be replaced by the query measure."}];function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g=({getDatabases:e,getTables:t,getColumns:n})=>(r,o)=>{return l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}({},o&&(0,a.getStandardSQLCompletionProvider)(r,o)),s=null!=(s={triggerCharacters:["."," ","$",",","(","'"],schemas:{resolve:e},tables:{resolve:e=>t(null==e?void 0:e.schema),parseName:e=>{var t;const n=(null!==(t=null==e?void 0:e.value)&&void 0!==t?t:"").split(".");return{schema:n.length>=1&&n[0]?n[0]:void 0,table:n.length>=2&&n[1]?n[1]:void 0}}},columns:{resolve:e=>n(e.schema,e.table)},supportedMacros:()=>d})?s:{},Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(s)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(s)).forEach((function(e){Object.defineProperty(l,e,Object.getOwnPropertyDescriptor(s,e))})),l;var l,s};function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){y(e,t,n[t])}))}return e}function E(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const h=E(m({},a.grafanaStandardSQLLanguage),{tokenizer:E(m({},a.grafanaStandardSQLLanguage.tokenizer),{schemaTable:[...a.grafanaStandardSQLLanguage.tokenizer.schemaTable,[/(\"\w+\"\.\"\w+\")/,"identifier"],[/(\"\w+\"\.\"\w+)/,"identifier"],[/(\"\w+\"\.\w+)\"/,"identifier"],[/(\"\w+\"\.)/,"identifier"]],complexIdentifiers:[]})}),q=a.grafanaStandardSQLLanguageConf,v={id:"timestream",loader:()=>Promise.resolve({conf:q,language:h})};function T(e,t,n,r,o,l,s){try{var a=e[l](s),i=a.value}catch(e){return void n(e)}a.done?t(i):Promise.resolve(i).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var l=e.apply(t,n);function s(e){T(l,r,o,s,a,"next",e)}function a(e){T(l,r,o,s,a,"throw",e)}s(void 0)}))}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}function S(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function R({query:e,datasource:r,onRunQuery:o,onChange:l}){const s=(0,t.useRef)(e);(0,t.useEffect)((()=>{s.current=e}),[e]);const i=(0,t.useCallback)(O((function*(){return(yield r.postResource("databases").catch((()=>[]))).map((e=>({name:e,completion:e})))})),[r]),u=(0,t.useCallback)((d=O((function*(e){var t;return(yield r.postResource("tables",{database:null!==(t=null!=e?e:s.current.database)&&void 0!==t?t:""}).catch((()=>[]))).map((e=>({name:e,completion:e})))})),function(e){return d.apply(this,arguments)}),[r]);var d;const p=(0,t.useCallback)(function(){var e=O((function*(e,t){var n,o;const l={database:e?e.replace(f,null!==(n=s.current.table)&&void 0!==n?n:""):s.current.table,table:t?t.replace(c,null!==(o=s.current.database)&&void 0!==o?o:""):s.current.database},[a,i]=yield Promise.all([r.postResource("measures",l).catch((()=>[])),r.postResource("dimensions",l).catch((()=>[]))]);return[...a,...i].map((e=>({name:e,completion:e})))}));return function(t,n){return e.apply(this,arguments)}}(),[r]),y=(0,t.useMemo)((()=>g({getDatabases:i,getTables:u,getColumns:p})),[i,u,p]);var m;return n().createElement(a.SQLEditor,{query:null!==(m=e.rawQuery)&&void 0!==m?m:"",onBlur:()=>o(),onChange:e=>{l(S(w({},s.current),{rawQuery:e}))},language:S(w({},v),{completionProvider:y})})}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){A(e,t,n[t])}))}return e}function I(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var N=i(545);const P=["us-east-1","us-east-2","us-west-2","eu-west-1","eu-central-1","ap-southeast-2","ap-northeast-1","us-gov-west-1"];function D(e,t,n,r,o,l,s){try{var a=e[l](s),i=a.value}catch(e){return void n(e)}a.done?t(i):Promise.resolve(i).then(r,o)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var l=e.apply(t,n);function s(e){D(l,r,o,s,a,"next",e)}function a(e){D(l,r,o,s,a,"throw",e)}s(void 0)}))}}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(){return _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){M(e,t,n[t])}))}return e}function F(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){x(e,t,n[t])}))}return e}function U(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function B(t){let n=t.refId+"/"+t.fields.length;for(const r of t.fields)n+="|"+r.name+":"+r.type,r.labels&&(n+=(0,e.formatLabels)(r.labels));return n}var j=i(177);function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){G(e,t,n[t])}))}return e}function Y(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function V(e){return"function"==typeof e}var H=function(e,t){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},H(e,t)};function $(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}H(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Q(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,l=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(o)throw o.error}}return s}function J(e,t,n){if(n||2===arguments.length)for(var r,o=0,l=t.length;o<l;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create;var z,Z=((z=function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}((function(e){Error.call(e),e.stack=(new Error).stack}))).prototype=Object.create(Error.prototype),z.prototype.constructor=z,z);function ee(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var te=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,o;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var s=Q(l),a=s.next();!a.done;a=s.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else l.remove(this);var i=this.initialTeardown;if(V(i))try{i()}catch(e){o=e instanceof Z?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var f=Q(u),c=f.next();!c.done;c=f.next()){var d=c.value;try{ne(d)}catch(e){o=null!=o?o:[],e instanceof Z?o=J(J([],X(o)),X(e.errors)):o.push(e)}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}}if(o)throw new Z(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)ne(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&ee(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&ee(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();function ne(e){V(e)?e():e.unsubscribe()}te.EMPTY;var re={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=re.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,J([e,t],X(n))):setTimeout.apply(void 0,J([e,t],X(n)))},clearTimeout:function(e){var t=re.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function oe(){}var le=se("C",void 0,void 0);function se(e,t,n){return{kind:e,value:t,error:n}}var ae=function(e){function t(t){var n,r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,((n=t)instanceof te||n&&"closed"in n&&V(n.remove)&&V(n.add)&&V(n.unsubscribe))&&t.add(r)):r.destination=de,r}return $(t,e),t.create=function(e,t,n){return new ue(e,t,n)},t.prototype.next=function(e){this.isStopped?ce(function(e){return se("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?ce(se("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?ce(le,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(te);Function.prototype.bind;var ie=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){fe(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){fe(e)}else fe(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){fe(e)}},e}(),ue=function(e){function t(t,n,r){var o,l=e.call(this)||this;return o=V(t)||!t?{next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:t,l.destination=new ie(o),l}return $(t,e),t}(ae);function fe(e){!function(e){re.setTimeout((function(){throw e}))}(e)}function ce(e,t){var n=null;n&&re.setTimeout((function(){return n(e,t)}))}var de={closed:!0,next:oe,error:function(e){throw e},complete:oe},pe=function(e){function t(t,n,r,o,l,s){var a=e.call(this,t)||this;return a.onFinalize=l,a.shouldUnsubscribe=s,a._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return $(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(ae);function ge(e,t){return n=function(n,r){var o=0;n.subscribe(new pe(r,(function(n){r.next(e.call(t,n,o++))}),void 0,void 0,void 0))},function(e){if(function(e){return V(null==e?void 0:e.lift)}(e))return e.lift((function(e){try{return n(e,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")};var n}function ye(e,t,n,r,o,l,s){try{var a=e[l](s),i=a.value}catch(e){return void n(e)}a.done?t(i):Promise.resolve(i).then(r,o)}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){me(e,t,n[t])}))}return e}function he(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}let qe=100;class ve extends N.DataSourceWithBackend{metricFindQuery(e,t){var n,r=this;return(n=function*(){if(!e)return Promise.resolve([]);const n=(0,N.getTemplateSrv)().replace(e);return r.getStrings(n,t.range).toPromise().then((e=>(e||[]).map((e=>({text:e})))))},function(){var e=this,t=arguments;return new Promise((function(r,o){var l=n.apply(e,t);function s(e){ye(l,r,o,s,a,"next",e)}function a(e){ye(l,r,o,s,a,"throw",e)}s(void 0)}))})()}filterQuery(e){return!!e.rawQuery}getQueryDisplayText(e){var t;return null!==(t=e.rawQuery)&&void 0!==t?t:""}quoteLiteral(e){return"'"+e.replace(/'/g,"''")+"'"}applyTemplateVariables(e,t){if(!e.rawQuery)return e;const n=Ee({},t);delete n.__interval_ms,delete n.__interval;const r=(0,N.getTemplateSrv)();return he(Ee({},e),{database:r.replace(e.database||"",t),table:r.replace(e.table||"",t),measure:r.replace(e.measure||"",t),rawQuery:r.replace(e.rawQuery,n,this.interpolateVariable)})}query(e){const t=e.targets;if(!t.length)return(0,j.of)({data:[]});if(t.some((e=>e.waitForResult)))return super.query(e);const n=[];for(let r of t)r.hide||n.push(this.doSingle(r,e));return 1===n.length?n[0]:(0,j.merge)(...n)}doSingle(t,n){let r,o,l=[];return s=he(Ee({},n),{targets:[t],requestId:"aws_ts_"+qe++}),a={getNextQuery:e=>{var t;if(null===(t=e.data)||void 0===t?void 0:t.length){var n;const t=e.data[0],l=null===(n=t.meta)||void 0===n?void 0:n.custom;var r;if(l&&l.nextToken)return o=l.queryId,{refId:t.refId,rawQuery:null===(r=t.meta)||void 0===r?void 0:r.executedQueryString,nextToken:l.nextToken}}},query:e=>super.query(e),process:(t,n,o)=>{var s,a,i;const u=null===(s=n[0])||void 0===s||null===(a=s.meta)||void 0===a?void 0:a.custom;if(!u)return l.length?l:n;const f=(0,e.getValueFormat)("decbytes");if(u.fetchStartTime=t.fetchStartTime,u.fetchEndTime=t.fetchEndTime,u.fetchTime=t.fetchEndTime-t.fetchStartTime,u.hasSeries||!l.length)for(const e of n)e.fields.length>0&&l.push(e);else n.length>1&&console.log("non timeseries should have a single frame",n),n[0].length>0&&(l=function(t,n){const r=new Map,o=[];for(const n of t){if(!n.length)continue;const t=B(n);if(n instanceof e.MutableDataFrame)r.set(t,n),o.push(n);else{const l=new e.MutableDataFrame;l.meta=n.meta,l.name=n.name,l.refId=n.refId;for(const t of n.fields){const r=[];for(let e=0;e<n.length;e++)r.push(t.values.get(e));l.addField(U(K({},t),{values:new e.ArrayVector(r)}))}r.set(t,l),o.push(l)}}for(const e of n){if(!e.length)continue;const t=B(e),n=r.get(t);if(n)for(let t=0;t<e.length;t++)for(let r=0;r<n.fields.length;r++)n.fields[r].values.add(e.fields[r].values.get(t));else o.push(e)}return o}(l,n));if(!(null===(i=l[0])||void 0===i?void 0:i.meta))return n;if(r){var c;if(!(null===(c=r.subs)||void 0===c?void 0:c.length)){var d;const{subs:e,nextToken:t,queryId:n}=r,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(r,["subs","nextToken","queryId"]);o.requestNumber=1,null===(d=r.subs)||void 0===d||d.push(o)}for(const e of r.subs)delete e.nextToken;delete u.queryId,u.requestNumber=r.subs.length+1,r.subs.push(u),r.fetchEndTime=t.fetchEndTime,r.fetchTime=t.fetchEndTime-r.fetchStartTime,r.executionFinishTime=u.executionFinishTime,l[0].meta.custom=r}else r=he(Ee({},t,u),{subs:[]});if(o&&r.executionStartTime&&r.executionFinishTime){delete r.nextToken;const e=r.executionFinishTime-r.executionStartTime;if(e>0){const t=[];if(r.subs&&r.subs.length&&t.push({displayName:"HTTP request count",value:r.subs.length,unit:"none"}),t.push({displayName:"Execution time (Grafana server  Timestream)",value:e,unit:"ms",decimals:2}),r.fetchStartTime){r.fetchEndTime=Date.now();const n=r.fetchEndTime-r.fetchStartTime;r.fetchTime=n-e,n>e&&(t.push({displayName:"Fetch time (Browser  Grafana server w/o Timestream)",value:r.fetchTime,unit:"ms",decimals:2}),t.push({displayName:"Fetch overhead",value:r.fetchTime/n*100,unit:"percent"}))}if(r.status.CumulativeBytesMetered){var p;const e=f(r.status.CumulativeBytesMetered,2,1024);t.push({displayName:"Cumulative bytes metered",value:Number(e.text),unit:null===(p=e.suffix)||void 0===p?void 0:p.trimLeft(),decimals:2})}if(r.status.CumulativeBytesScanned){var g;const e=f(r.status.CumulativeBytesScanned,2,1024);t.push({displayName:"Cumulative bytes scanned",value:Number(e.text),unit:null===(g=e.suffix)||void 0===g?void 0:g.trimLeft(),decimals:2})}l[0].meta.stats=t}}return l},onCancel:e=>{o&&(console.log("Cancelling running timestream query"),this.postResource("cancel",{queryId:o}).then((e=>{console.log("Timestream query Canceled:",e)})).catch((e=>{e.isHandled=!0,console.log("error killing",e)})))}},new j.Observable((t=>{let n,r;const o={fetchStartTime:Date.now(),fetchEndTime:void 0};let l=e.LoadingState.Loading,i=1;const u={next:r=>{o.fetchEndTime=Date.now(),l=r.state;let i=!1;l!==e.LoadingState.Error&&(n=a.getNextQuery(r),i=!0);const u=a.process(o,r.data,!n);i&&(l=n?u.length&&u[0].length?e.LoadingState.Streaming:e.LoadingState.Loading:e.LoadingState.Done),t.next(Y(W({},r),{data:u,state:l,key:s.requestId}))},error:e=>{t.error(e)},complete:()=>{r&&(r.unsubscribe(),r=void 0),n?(o.fetchEndTime=void 0,o.fetchStartTime=Date.now(),r=a.query(Y(W({},s),{requestId:`${s.requestId}.${++i}`,startTime:o.fetchStartTime,targets:[n]})).subscribe(u),n=void 0):t.complete()}};return r=a.query(s).subscribe(u),()=>{n=void 0,u.complete(),o.fetchEndTime||a.onCancel(o)}}));var s,a}getStrings(e,t){return this.query({targets:[{refId:"GetStrings",rawQuery:e}],range:t}).pipe(ge((e=>{var t;if(e.error){var n,r,o;const t=null!==(o=null!==(r=e.error.message)&&void 0!==r?r:null===(n=e.error.data)||void 0===n?void 0:n.message)&&void 0!==o?o:"Error getting variable";throw new Error(t)}const l=e.data[0];if(!l||!l.length)return[];const s=null===(t=l.fields[0])||void 0===t?void 0:t.values;return s?s.toArray():[]})))}constructor(e){super(e),this.annotations={},this.interpolateVariable=e=>"string"==typeof e?e:e.map((e=>this.quoteLiteral(e))).join(","),this.options=e.jsonData}}const Te=new e.DataSourcePlugin(ve).setConfigEditor((function(e){const o=`/api/datasources/${e.options.id}`,l=`${o}/resources`,[a,i]=(0,t.useState)(!!e.options.jsonData.defaultRegion),u=(f=L((function*(){a||(yield(0,N.getBackendSrv)().put(o,e.options).then((t=>{e.onOptionsChange(F(k({},e.options),{version:t.datasource.version}))})),i(!0))})),function(){return f.apply(this,arguments)});var f;const c=function(){var e=L((function*(){return yield(0,N.getBackendSrv)().get(l+"/databases")}));return function(){return e.apply(this,arguments)}}(),d=function(){var t=L((function*(){return yield(0,N.getBackendSrv)().post(l+"/tables",{database:e.options.jsonData.defaultDatabase})}));return function(){return t.apply(this,arguments)}}(),p=function(){var t=L((function*(){return yield(0,N.getBackendSrv)().post(l+"/measures",{database:e.options.jsonData.defaultDatabase,table:e.options.jsonData.defaultTable})}));return function(){return t.apply(this,arguments)}}(),g=t=>n=>{var r;let o=null!==(r=null==n?void 0:n.value)&&void 0!==r?r:"";e.onOptionsChange(F(k({},e.options),{jsonData:F(k({},e.options.jsonData),{[t]:o})}))};var y,m,E;return n().createElement("div",{className:"gf-form-group"},n().createElement(r.mO,_({},e,{standardRegions:P,defaultEndpoint:"https://query-{cell}.timestream.{region}.amazonaws.com",onOptionsChange:t=>{i(!1),e.onOptionsChange(t)}})),n().createElement("h3",null,"Timestream Details"),n().createElement("p",null,"Default values to be used as macros"),n().createElement(r.B5,_({},e,{value:null!==(y=e.options.jsonData.defaultDatabase)&&void 0!==y?y:"",onChange:g("defaultDatabase"),fetch:c,label:s.defaultDatabase.input,"data-testid":s.defaultDatabase.wrapper,saveOptions:u})),n().createElement(r.B5,_({},e,{value:null!==(m=e.options.jsonData.defaultTable)&&void 0!==m?m:"",onChange:g("defaultTable"),fetch:d,label:s.defaultTable.input,"data-testid":s.defaultTable.wrapper,dependencies:[e.options.jsonData.defaultDatabase||""],saveOptions:u})),n().createElement(r.B5,_({},e,{value:null!==(E=e.options.jsonData.defaultMeasure)&&void 0!==E?E:"",onChange:g("defaultMeasure"),fetch:p,label:s.defaultMeasure.input,"data-testid":s.defaultMeasure.wrapper,dependencies:[e.options.jsonData.defaultDatabase||"",e.options.jsonData.defaultTable||""],saveOptions:u})))})).setMetadataInspector((function(e){const{data:t}=e;return t&&t.length?n().createElement("div",null,t.map(((e,t)=>((e,t)=>{var r;const o=null===(r=e.meta)||void 0===r?void 0:r.custom;return o?n().createElement("div",{key:t},n().createElement("h3",null,"Query ID"),n().createElement("pre",null,o.queryId),o.nextToken&&n().createElement(n().Fragment,null,n().createElement("h3",null,"Next Token"),n().createElement("pre",null,o.nextToken)),n().createElement("h3",null,"Details"),n().createElement("pre",null,JSON.stringify(o,null,2))):null})(e,t)))):n().createElement("div",null,"No Data")})).setQueryEditor((function(e){const{query:a,datasource:i,onChange:u,onRunQuery:f}=e,{database:c,table:d,measure:p}=a,{defaultDatabase:g,defaultTable:y,defaultMeasure:m}=i.options;(0,t.useEffect)((()=>{c&&d&&d||u(I(C({},a),{database:c||g,table:d||y,measure:p||m}))}),[]);const E=e=>t=>{u(I(C({},a),{[e]:null==t?void 0:t.value}))};(0,t.useEffect)((()=>{c&&d&&p&&f()}),[c,d,p,f]);const[h,q]=(0,t.useState)([]);(0,t.useEffect)((()=>{i.getResource("databases").then((e=>q(e)))}),[i]);const[v,T]=(0,t.useState)([]);(0,t.useEffect)((()=>{c&&i.postResource("tables",{database:c||""}).then((e=>{e.length>0&&!e.some((e=>d===e))&&u(I(C({},a),{table:e[0]})),T(e)}))}),[c]);const[O,b]=(0,t.useState)([]);return(0,t.useEffect)((()=>{c&&d&&i.postResource("measures",{database:c,table:d}).then((e=>{e.length>0&&!e.some((e=>p===e))&&u(I(C({},a),{measure:e[0]})),b(e)}))}),[c,d]),n().createElement(o.InlineSegmentGroup,null,n().createElement("div",{className:"gf-form-group"},n().createElement("h6",null,"Macros"),n().createElement(r.Nw,{onChange:E("database"),resources:h,value:c||null,tooltip:"Use the selected schema with the $__database macro",label:s.defaultDatabase.input,"data-testid":s.defaultDatabase.wrapper,labelWidth:11,className:"width-12"}),n().createElement(r.Nw,{onChange:E("table"),resources:v,value:d||null,tooltip:"Use the selected table with the $__table macro",label:s.defaultTable.input,"data-testid":s.defaultTable.wrapper,labelWidth:11,className:"width-12"}),n().createElement(r.Nw,{onChange:E("measure"),resources:O,value:p||null,tooltip:"Use the selected column with the $__measure macro",label:s.defaultMeasure.input,"data-testid":s.defaultMeasure.wrapper,labelWidth:11,className:"width-12"}),n().createElement("h6",null,"Render"),n().createElement(o.InlineField,{id:`${e.query.refId}-wait`,label:"Wait for all queries",labelWidth:16,style:{alignItems:"center"}},n().createElement(o.Switch,{"aria-labelledby":`${e.query.refId}-wait`,onChange:()=>{u(I(C({},a),{waitForResult:!a.waitForResult}))},checked:a.waitForResult})),n().createElement("h6",null,"Sample queries"),n().createElement(o.Label,{description:"Selecting a sample will modify the current query"},n().createElement(o.InlineField,{label:"Query",labelWidth:11},n().createElement(o.Select,{"aria-label":"Query",options:l,onChange:e=>{return t=e.value||"",u(I(C({},a),{rawQuery:t})),void f();var t},className:"width-12"})))),n().createElement("div",{style:{minWidth:"400px",marginLeft:"10px",flex:1}},n().createElement(R,{query:a,onRunQuery:e.onRunQuery,onChange:e.onChange,datasource:e.datasource})))}))})(),u})()));
//# sourceMappingURL=module.js.map